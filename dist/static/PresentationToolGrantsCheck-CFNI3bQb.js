const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/QRCodeSVG-D2G975de.js","static/sanity-SYGIf7-C.js","static/LiveQueries-BUUmkNUa.js","static/DisplayedDocumentBroadcaster-DrV2hX3N.js","static/PostMessageDocuments-CTux4QMd.js","static/PostMessageRefreshMutations-DnZxmZQs.js","static/PostMessagePerspective-BlmeKMh4.js","static/PostMessagePreviewSnapshots-DCRuMFXS.js","static/PostMessageSchema-CKmjTzfb.js","static/PostMessageTelemetry-DbT-Xh8t.js"])))=>i.map(i=>d[i]);
import{a3 as Un,a4 as qn,aW as it,aX as Fn,r as h,aY as Ut,aZ as Vn,j as u,a_ as Bn,a$ as tn,b0 as Qe,b1 as Ie,b2 as yt,b3 as Hn,b4 as De,b5 as Kn,b6 as nn,b7 as ct,b8 as Gn,b9 as Xn,aq as vt,ba as lt,bb as rn,bc as Pt,bd as Qn,be as bt,bf as Yn,bg as Jn,bh as Zn,bi as St,bj as _t,bk as Fe,bl as Ne,bm as jt,bn as Et,bo as $e,bp as Ue,bq as Rt,br as er,bs as sn,bt as tr,as as an,bu as nr,i as pe,b as L,bv as at,bw as Be,a9 as Ae,W as Ze,T as X,t as ye,s as on,m as He,bx as Ke,by as Ct,bz as rr,aK as Se,bA as sr,bB as ar,G as or,bC as qe,bD as cn,B as de,S as Oe,C as ue,bE as ln,bF as ir,bG as cr,A as lr,F as ne,bH as Tt,bI as ur,bJ as un,bK as qt,bL as dn,bM as dr,bN as pr,q as et,p as tt,bO as pn,bP as mn,bQ as mr,bR as fr,bS as ve,bT as hr,bU as fn,bV as It,bW as gr,bX as yr,a5 as kt,bY as hn,n as vr,bZ as br,b_ as wr,b$ as xr,U as Pr,c0 as gn,c1 as Sr,c2 as Ft,c3 as yn,af as _r,c4 as jr,c5 as Er,c6 as Rr,c7 as vn,c8 as Cr,c9 as At,I as Tr,a as Ir,az as bn,ca as kr,cb as Ar,cc as Mr,cd as $r,ce as Or,cf as Lr,cg as ot,ch as wn,ci as zr,cj as Wr,ab as Dr,ck as Nr,cl as Ur,cm as qr,aM as Fr,K as Vr,cn as Br,D as Hr,co as Kr,cp as Gr,cq as Xr,cr as Qr,cs as Yr,ct as Jr,cu as Zr,y as es,cv as ts,al as xn,ak as Pn,ao as ns,cw as rs,cx as ss}from"./sanity-SYGIf7-C.js";import{i as as,D as os}from"./DisplayedDocumentBroadcaster-DrV2hX3N.js";function is(n,e){return e===void 0&&(e=null),e=e??n,Un(function(t,a){var r=[],s=0;t.subscribe(qn(a,function(o){var i,l,c,p,d=null;s++%e===0&&r.push([]);try{for(var f=it(r),m=f.next();!m.done;m=f.next()){var g=m.value;g.push(o),n<=g.length&&(d=d??[],d.push(g))}}catch(v){i={error:v}}finally{try{m&&!m.done&&(l=f.return)&&l.call(f)}finally{if(i)throw i.error}}if(d)try{for(var b=it(d),y=b.next();!y.done;y=b.next()){var g=y.value;Fn(r,g),a.next(g)}}catch(v){c={error:v}}finally{try{y&&!y.done&&(p=b.return)&&p.call(b)}finally{if(c)throw c.error}}},function(){var o,i;try{for(var l=it(r),c=l.next();!c.done;c=l.next()){var p=c.value;a.next(p)}}catch(d){o={error:d}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}a.complete()},void 0,function(){r=null}))})}function cs({children:n,isValidProp:e,...t}){e&&Bn(e),t={...h.useContext(Ut),...t},t.isStatic=Vn(()=>t.isStatic);const a=h.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return u.jsx(Ut.Provider,{value:a,children:n})}const te=[];for(let n=0;n<256;++n)te.push((n+256).toString(16).slice(1));function ls(n,e=0){return(te[n[e+0]]+te[n[e+1]]+te[n[e+2]]+te[n[e+3]]+"-"+te[n[e+4]]+te[n[e+5]]+"-"+te[n[e+6]]+te[n[e+7]]+"-"+te[n[e+8]]+te[n[e+9]]+"-"+te[n[e+10]]+te[n[e+11]]+te[n[e+12]]+te[n[e+13]]+te[n[e+14]]+te[n[e+15]]).toLowerCase()}let ut;const us=new Uint8Array(16);function ds(){if(!ut){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ut=crypto.getRandomValues.bind(crypto)}return ut(us)}const ps=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vt={randomUUID:ps};function We(n,e,t){var r;if(Vt.randomUUID&&!n)return Vt.randomUUID();n=n||{};const a=n.random??((r=n.rng)==null?void 0:r.call(n))??ds();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,ls(a)}const Bt=n=>({context:e})=>{const{count:t,include:a,exclude:r,responseType:s="message.received"}=n;return{count:t,domain:e.domain,from:e.connectTo,include:a?Array.isArray(a)?a:[a]:[],exclude:r?Array.isArray(r)?r:[r]:[],responseType:s,target:e.target,to:e.name}},ms=n=>e=>{const{data:t}=e;return(n.include.length?n.include.includes(t.type):!0)&&(n.exclude.length?!n.exclude.includes(t.type):!0)&&t.domain===n.domain&&t.from===n.from&&t.to===n.to&&(!n.target||e.source===n.target)},fs=n=>e=>({type:n,message:e}),hs=Zn(()=>bt(window,"message")),Sn=n=>nn(({input:e})=>hs.pipe(n?vt(n):lt(),rn(ms(e)),vt(fs(e.responseType)),e.count?lt(is(e.count),Qn(t=>t),Pt(e.count)):lt())),Mt="sanity/comlink",gs=3e3,ys=500,Ve="comlink/response",nt="comlink/heartbeat",$t="comlink/disconnect",Ot="comlink/handshake/syn",Lt="comlink/handshake/syn-ack",zt="comlink/handshake/ack",vs=n=>e=>e.pipe(Pt(1),vt(()=>{throw new Error(n)})),_n=()=>tn({types:{},actors:{listen:nn(({input:n})=>{const e=n.signal?bt(n.signal,"abort").pipe(vs(`Request ${n.requestId} aborted`)):Yn,t=a=>{var r,s;return((r=a.data)==null?void 0:r.type)===Ve&&((s=a.data)==null?void 0:s.responseTo)===n.requestId&&!!a.source&&n.sources.has(a.source)};return bt(window,"message").pipe(rn(t),Pt(n.sources.size),Jn(e))})},actions:{"send message":({context:n},e)=>{const{sources:t,targetOrigin:a}=n,{message:r}=e;t.forEach(s=>{s.postMessage(r,{targetOrigin:a})})},"on success":ct(({context:n})=>n.parentRef,({context:n,self:e})=>{var t;return n.response&&((t=n.resolvable)==null||t.resolve(n.response)),{type:"request.success",requestId:e.id,response:n.response,responseTo:n.responseTo}}),"on fail":ct(({context:n})=>n.parentRef,({context:n,self:e})=>{var t;return n.suppressWarnings||console.warn(`[@sanity/comlink] Received no response to message '${n.type}' on client '${n.from}' (ID: '${n.id}').`),(t=n.resolvable)==null||t.reject(new Error("No response received")),{type:"request.failed",requestId:e.id}}),"on abort":ct(({context:n})=>n.parentRef,({context:n,self:e})=>{var t;return(t=n.resolvable)==null||t.reject(new Error("Request aborted")),{type:"request.aborted",requestId:e.id}})},guards:{expectsResponse:({context:n})=>n.expectResponse},delays:{initialTimeout:0,responseTimeout:({context:n})=>n.responseTimeout??gs}}).createMachine({context:({input:n})=>({channelId:n.channelId,data:n.data,domain:n.domain,expectResponse:n.expectResponse??!1,from:n.from,id:`msg-${We()}`,parentRef:n.parentRef,resolvable:n.resolvable,response:null,responseTimeout:n.responseTimeout,responseTo:n.responseTo,signal:n.signal,sources:n.sources instanceof Set?n.sources:new Set([n.sources]),suppressWarnings:n.suppressWarnings,targetOrigin:n.targetOrigin,to:n.to,type:n.type}),initial:"idle",on:{abort:".aborted"},states:{idle:{after:{initialTimeout:[{target:"sending"}]}},sending:{entry:{type:"send message",params:({context:n})=>{const{channelId:e,data:t,domain:a,from:r,id:s,responseTo:o,to:i,type:l}=n;return{message:{channelId:e,data:t,domain:a,from:r,id:s,to:i,type:l,responseTo:o}}}},always:[{guard:"expectsResponse",target:"awaiting"},"success"]},awaiting:{invoke:{id:"listen for response",src:"listen",input:({context:n})=>({requestId:n.id,sources:n.sources,signal:n.signal}),onError:"aborted"},after:{responseTimeout:"failed"},on:{message:{actions:yt({response:({event:n})=>n.data.data,responseTo:({event:n})=>n.data.responseTo}),target:"success"}}},failed:{type:"final",entry:"on fail"},success:{type:"final",entry:"on success"},aborted:{type:"final",entry:"on abort"}},output:({context:n,self:e})=>({requestId:e.id,response:n.response,responseTo:n.responseTo})}),bs=Gn(({sendBack:n,input:e})=>{const t=()=>{n(e.event)};e.immediate&&t();const a=setInterval(t,e.interval);return()=>{clearInterval(a)}}),rt=()=>tn({types:{},actors:{requestMachine:_n(),listen:Sn(),sendBackAtInterval:bs},actions:{"buffer message":Qe(({enqueue:n})=>{n.assign({buffer:({event:e,context:t})=>(Ie(e,"post"),[...t.buffer,e.data])}),n.emit(({event:e})=>(Ie(e,"post"),{type:"buffer.added",message:e.data}))}),"create request":yt({requests:({context:n,event:e,self:t,spawn:a})=>{Ie(e,"request");const r=(Array.isArray(e.data)?e.data:[e.data]).map(s=>{const o=`req-${We()}`;return a("requestMachine",{id:o,input:{channelId:n.channelId,data:s.data,domain:n.domain,expectResponse:s.expectResponse,from:n.name,parentRef:t,responseTo:s.responseTo,sources:n.target,targetOrigin:n.targetOrigin,to:n.connectTo,type:s.type}})});return[...n.requests,...r]}}),"emit received message":Qe(({enqueue:n})=>{n.emit(({event:e})=>(Ie(e,"message.received"),{type:"message",message:e.message.data}))}),"emit status":Hn((n,e)=>({type:"status",status:e.status})),"post message":De(({event:n})=>(Ie(n,"post"),{type:"request",data:{data:n.data.data,expectResponse:!0,type:n.data.type}})),"remove request":Qe(({context:n,enqueue:e,event:t})=>{Ie(t,["request.success","request.failed","request.aborted"]),Kn(t.requestId),e.assign({requests:n.requests.filter(({id:a})=>a!==t.requestId)})}),respond:De(({event:n})=>(Ie(n,"response"),{type:"request",data:{data:n.data,type:Ve,responseTo:n.respondTo}})),"send handshake ack":De({type:"request",data:{type:zt}}),"send disconnect":De(()=>({type:"request",data:{type:$t}})),"send handshake syn":De({type:"request",data:{type:Ot}}),"send pending messages":Qe(({enqueue:n})=>{n.raise(({context:e})=>({type:"request",data:e.buffer.map(({data:t,type:a})=>({data:t,type:a}))})),n.emit(({context:e})=>({type:"buffer.flushed",messages:e.buffer})),n.assign({buffer:[]})}),"set target":yt({target:({event:n})=>(Ie(n,"target.set"),n.target)})},guards:{"has target":({context:n})=>!!n.target,"should send heartbeats":({context:n})=>n.heartbeat}}).createMachine({id:"connection",context:({input:n})=>({id:n.id||`${n.name}-${We()}`,buffer:[],channelId:`chn-${We()}`,connectTo:n.connectTo,domain:n.domain??Mt,heartbeat:n.heartbeat??!1,name:n.name,requests:[],target:n.target,targetOrigin:n.targetOrigin}),on:{"target.set":{actions:"set target"},"request.success":{actions:"remove request"},"request.failed":{actions:"remove request"}},initial:"idle",states:{idle:{entry:[{type:"emit status",params:{status:"idle"}}],on:{connect:{target:"handshaking",guard:"has target"},post:{actions:"buffer message"}}},handshaking:{id:"handshaking",entry:[{type:"emit status",params:{status:"handshaking"}}],invoke:[{id:"send syn",src:"sendBackAtInterval",input:()=>({event:{type:"syn"},interval:ys,immediate:!0})},{id:"listen for handshake",src:"listen",input:n=>Bt({include:Lt,count:1})(n)}],on:{syn:{actions:"send handshake syn"},request:{actions:"create request"},post:{actions:"buffer message"},"message.received":{target:"connected"},disconnect:{target:"disconnected"}},exit:"send handshake ack"},connected:{entry:["send pending messages",{type:"emit status",params:{status:"connected"}}],invoke:{id:"listen for messages",src:"listen",input:Bt({exclude:[Ve,nt]})},on:{post:{actions:"post message"},request:{actions:"create request"},response:{actions:"respond"},"message.received":{actions:"emit received message"},disconnect:{target:"disconnected"}},initial:"heartbeat",states:{heartbeat:{initial:"checking",states:{checking:{always:{guard:"should send heartbeats",target:"sending"}},sending:{on:{"request.failed":{target:"#handshaking"}},invoke:{id:"send heartbeat",src:"sendBackAtInterval",input:()=>({event:{type:"post",data:{type:nt,data:void 0}},interval:2e3,immediate:!1})}}}}}},disconnected:{id:"disconnected",entry:["send disconnect",{type:"emit status",params:{status:"disconnected"}}],on:{request:{actions:"create request"},post:{actions:"buffer message"},connect:{target:"handshaking",guard:"has target"}}}}}),dt=(n,e=rt())=>{const t=n.id||`${n.name}-${We()}`,a=Xn(e,{input:{...n,id:t}}),r=new Map,s=new Map,o=(g,b,y)=>{const v=r.get(g)||new Set;r.has(g)||r.set(g,v),v.add(b);const w=s.get(g);if(w){const _=(y==null?void 0:y.replay)??1;Array.from(w).slice(-_).forEach(async({data:x,id:E})=>{const C=await b(x);C&&a.send({type:"response",respondTo:E,data:C})}),s.delete(g)}return()=>{v.delete(b)}},i=()=>{a.send({type:"connect"})},l=()=>{a.send({type:"disconnect"})},c=(g,b)=>{const{unsubscribe:y}=a.on("status",v=>{b&&v.status!==b||g(v.status)});return y},p=g=>{a.send({type:"target.set",target:g})},d=(g,b)=>{const y={type:g,data:b};a.send({type:"post",data:y})};a.on("message",async({message:g})=>{const b=r.get(g.type);if(b){b.forEach(async v=>{const w=await v(g.data);w&&a.send({type:"response",respondTo:g.id,data:w})});return}const y=s.get(g.type);y?y.add(g):s.set(g.type,new Set([g]))});const f=()=>{a.stop()},m=()=>(a.start(),f);return{actor:a,connect:i,disconnect:l,id:t,name:n.name,machine:e,on:o,onStatus:c,post:d,setTarget:p,start:m,stop:f,get target(){return a.getSnapshot().context.target}}},pt=n=>{n.disconnect(),setTimeout(()=>{n.stop()},0)},ws=()=>{},xs=n=>{const{targetOrigin:e}=n,t=new Set,a=new Set;return{addTarget:r=>{if(t.has(r))return ws;if(!t.size||!a.size)return t.add(r),a.forEach(o=>{o.connections.forEach(i=>{i.setTarget(r),i.connect()})}),()=>{t.delete(r),a.forEach(o=>{o.connections.forEach(i=>{i.target===r&&i.disconnect()})})};t.add(r);const s=new Set;return a.forEach(o=>{const i=dt({...o.input,target:r,targetOrigin:e},o.machine);s.add(i),o.connections.add(i),o.subscribers.forEach(({type:l,handler:c,unsubscribers:p})=>{p.push(i.on(l,c))}),o.internalEventSubscribers.forEach(({type:l,handler:c,unsubscribers:p})=>{p.push(i.actor.on(l,c).unsubscribe)}),o.statusSubscribers.forEach(({handler:l,unsubscribers:c})=>{c.push(i.onStatus(p=>l({connection:i.id,status:p})))}),i.start(),i.connect()}),()=>{t.delete(r),s.forEach(o=>{pt(o),a.forEach(i=>{i.connections.delete(o)})})}},createChannel:(r,s=rt())=>{const o={connections:new Set,input:r,internalEventSubscribers:new Set,machine:s,statusSubscribers:new Set,subscribers:new Set};a.add(o);const{connections:i,internalEventSubscribers:l,statusSubscribers:c,subscribers:p}=o;if(t.size)t.forEach(y=>{const v=dt({...r,target:y,targetOrigin:e},s);i.add(v)});else{const y=dt({...r,targetOrigin:e},s);i.add(y)}const d=(...y)=>{const[v,w]=y;i.forEach(_=>{_.post(v,w)})},f=(y,v)=>{const w=[];i.forEach(x=>{w.push(x.on(y,v))});const _={type:y,handler:v,unsubscribers:w};return p.add(_),()=>{w.forEach(x=>x()),p.delete(_)}},m=(y,v)=>{const w=[];i.forEach(x=>{w.push(x.actor.on(y,v).unsubscribe)});const _={type:y,handler:v,unsubscribers:w};return l.add(_),()=>{w.forEach(x=>x()),l.delete(_)}},g=y=>{const v=[];i.forEach(_=>{v.push(_.onStatus(x=>y({connection:_.id,status:x})))});const w={handler:y,unsubscribers:v};return c.add(w),()=>{v.forEach(_=>_()),c.delete(w)}},b=()=>{const y=o.connections;y.forEach(pt),y.clear(),a.delete(o)};return{on:f,onInternalEvent:m,onStatus:g,post:d,start:()=>(i.forEach(y=>{y.start(),y.connect()}),b),stop:b}},destroy:()=>{a.forEach(({connections:r})=>{r.forEach(pt),r.clear()}),a.clear(),t.clear()}}},Ps={"handshake/syn":Ot,"handshake/syn-ack":Lt,"handshake/ack":zt,"channel/response":Ve,"channel/heartbeat":nt,"channel/disconnect":$t,"overlay/focus":"visual-editing/focus","overlay/navigate":"visual-editing/navigate","overlay/toggle":"visual-editing/toggle","presentation/toggleOverlay":"presentation/toggle-overlay"},Ss={[Ot]:"handshake/syn",[Lt]:"handshake/syn-ack",[zt]:"handshake/ack",[Ve]:"channel/response",[nt]:"channel/heartbeat",[$t]:"channel/disconnect","visual-editing/focus":"overlay/focus","visual-editing/navigate":"overlay/navigate","visual-editing/toggle":"overlay/toggle","presentation/toggle-overlay":"presentation/toggleOverlay"},_s=n=>{const{data:e}=n;return e&&typeof e=="object"&&"domain"in e&&"type"in e&&"from"in e&&"to"in e&&(e.domain==="sanity/channels"&&(e.domain=Mt),e.to==="overlays"&&(e.to="visual-editing"),e.from==="overlays"&&(e.from="visual-editing"),e.channelId=e.connectionId,delete e.connectionId,e.type=Ps[e.type]??e.type),n},js=n=>{const{channelId:e,...t}=n,a={...t,connectionId:e};return a.domain===Mt&&(a.domain="sanity/channels"),a.to==="visual-editing"&&(a.to="overlays"),a.from==="visual-editing"&&(a.from="overlays"),a.type=Ss[a.type]??a.type,a.type==="channel/response"&&a.responseTo&&!a.data&&(a.data={responseTo:a.responseTo}),(a.type==="handshake/syn"||a.type==="handshake/syn-ack"||a.type==="handshake/ack")&&(a.data={id:a.connectionId}),a},Es=({context:n},e)=>{const{sources:t,targetOrigin:a}=n,r=js(e.message);t.forEach(s=>{s.postMessage(r,{targetOrigin:a})})},Ht=()=>({listen:Sn(_s),requestMachine:_n().provide({actions:{"send message":Es}})});function Rs(n){const e=new URL(n),{searchParams:t}=e;return t.delete(_t),t.delete(St),t.delete(Fe),t.delete(Ne),t.delete(jt),e}function Cs(n,e,t,a){const r=new URL(n),{searchParams:s}=r;return e&&(s.set(St,e),s.set(_t,t)),s.set(Fe,a),r}function jn(){if(typeof crypto<"u"){const n=new Uint8Array(16);crypto.getRandomValues(n);let e="";for(let t=0;t<n.length;t++)e+=n[t].toString(16).padStart(2,"0");return e=btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),e}return Math.random().toString(36).slice(2)}async function Ts(n,e,t,a){const r=n.withConfig({apiVersion:Et}),s=jn(),o=r.patch($e).set({secret:s,studioUrl:t,userId:a});return await r.transaction().createIfNotExists({_id:$e,_type:Ue,source:e,studioUrl:t,userId:a}).patch(o).commit({tag:Rt}),{secret:s}}async function Is(n,e,t,a){const r=n.withConfig({apiVersion:Et}),s=r.patch($e).set({secret:null,studioUrl:t,userId:a});await r.transaction().createIfNotExists({_id:$e,_type:Ue,source:e,studioUrl:t,userId:a}).patch(s).commit({tag:Rt})}function ks(n){for(var e=[],t=0;t<n.length;){var a=n[t];if(a==="*"||a==="+"||a==="?"){e.push({type:"MODIFIER",index:t,value:n[t++]});continue}if(a==="\\"){e.push({type:"ESCAPED_CHAR",index:t++,value:n[t++]});continue}if(a==="{"){e.push({type:"OPEN",index:t,value:n[t++]});continue}if(a==="}"){e.push({type:"CLOSE",index:t,value:n[t++]});continue}if(a===":"){for(var r="",s=t+1;s<n.length;){var o=n.charCodeAt(s);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===95){r+=n[s++];continue}break}if(!r)throw new TypeError("Missing parameter name at ".concat(t));e.push({type:"NAME",index:t,value:r}),t=s;continue}if(a==="("){var i=1,l="",s=t+1;if(n[s]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<n.length;){if(n[s]==="\\"){l+=n[s++]+n[s++];continue}if(n[s]===")"){if(i--,i===0){s++;break}}else if(n[s]==="("&&(i++,n[s+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(s));l+=n[s++]}if(i)throw new TypeError("Unbalanced pattern at ".concat(t));if(!l)throw new TypeError("Missing pattern at ".concat(t));e.push({type:"PATTERN",index:t,value:l}),t=s;continue}e.push({type:"CHAR",index:t,value:n[t++]})}return e.push({type:"END",index:t,value:""}),e}function As(n,e){e===void 0&&(e={});for(var t=ks(n),a=e.prefixes,r=a===void 0?"./":a,s=e.delimiter,o=s===void 0?"/#?":s,i=[],l=0,c=0,p="",d=function(P){if(c<t.length&&t[c].type===P)return t[c++].value},f=function(P){var j=d(P);if(j!==void 0)return j;var T=t[c],A=T.type,k=T.index;throw new TypeError("Unexpected ".concat(A," at ").concat(k,", expected ").concat(P))},m=function(){for(var P="",j;j=d("CHAR")||d("ESCAPED_CHAR");)P+=j;return P},g=function(P){for(var j=0,T=o;j<T.length;j++){var A=T[j];if(P.indexOf(A)>-1)return!0}return!1},b=function(P){var j=i[i.length-1],T=P||(j&&typeof j=="string"?j:"");if(j&&!T)throw new TypeError('Must have text between two parameters, missing text after "'.concat(j.name,'"'));return!T||g(T)?"[^".concat(ke(o),"]+?"):"(?:(?!".concat(ke(T),")[^").concat(ke(o),"])+?")};c<t.length;){var y=d("CHAR"),v=d("NAME"),w=d("PATTERN");if(v||w){var _=y||"";r.indexOf(_)===-1&&(p+=_,_=""),p&&(i.push(p),p=""),i.push({name:v||l++,prefix:_,suffix:"",pattern:w||b(_),modifier:d("MODIFIER")||""});continue}var x=y||d("ESCAPED_CHAR");if(x){p+=x;continue}p&&(i.push(p),p="");var E=d("OPEN");if(E){var _=m(),C=d("NAME")||"",S=d("PATTERN")||"",I=m();f("CLOSE"),i.push({name:C||(S?l++:""),pattern:C&&!S?b(_):S,prefix:_,suffix:I,modifier:d("MODIFIER")||""});continue}f("END")}return i}function Ms(n,e){var t=[],a=Rn(n,t,e);return $s(a,t,e)}function $s(n,e,t){t===void 0&&(t={});var a=t.decode,r=a===void 0?function(s){return s}:a;return function(s){var o=n.exec(s);if(!o)return!1;for(var i=o[0],l=o.index,c=Object.create(null),p=function(f){if(o[f]===void 0)return"continue";var m=e[f-1];m.modifier==="*"||m.modifier==="+"?c[m.name]=o[f].split(m.prefix+m.suffix).map(function(g){return r(g,m)}):c[m.name]=r(o[f],m)},d=1;d<o.length;d++)p(d);return{path:i,index:l,params:c}}}function ke(n){return n.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function En(n){return n&&n.sensitive?"":"i"}function Os(n,e){if(!e)return n;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,a=0,r=t.exec(n.source);r;)e.push({name:r[1]||a++,prefix:"",suffix:"",modifier:"",pattern:""}),r=t.exec(n.source);return n}function Ls(n,e,t){var a=n.map(function(r){return Rn(r,e,t).source});return new RegExp("(?:".concat(a.join("|"),")"),En(t))}function zs(n,e,t){return Ws(As(n,t),e,t)}function Ws(n,e,t){t===void 0&&(t={});for(var a=t.strict,r=a===void 0?!1:a,s=t.start,o=s===void 0?!0:s,i=t.end,l=i===void 0?!0:i,c=t.encode,p=c===void 0?function(j){return j}:c,d=t.delimiter,f=d===void 0?"/#?":d,m=t.endsWith,g=m===void 0?"":m,b="[".concat(ke(g),"]|$"),y="[".concat(ke(f),"]"),v=o?"^":"",w=0,_=n;w<_.length;w++){var x=_[w];if(typeof x=="string")v+=ke(p(x));else{var E=ke(p(x.prefix)),C=ke(p(x.suffix));if(x.pattern)if(e&&e.push(x),E||C)if(x.modifier==="+"||x.modifier==="*"){var S=x.modifier==="*"?"?":"";v+="(?:".concat(E,"((?:").concat(x.pattern,")(?:").concat(C).concat(E,"(?:").concat(x.pattern,"))*)").concat(C,")").concat(S)}else v+="(?:".concat(E,"(").concat(x.pattern,")").concat(C,")").concat(x.modifier);else{if(x.modifier==="+"||x.modifier==="*")throw new TypeError('Can not repeat "'.concat(x.name,'" without a prefix and suffix'));v+="(".concat(x.pattern,")").concat(x.modifier)}else v+="(?:".concat(E).concat(C,")").concat(x.modifier)}}if(l)r||(v+="".concat(y,"?")),v+=t.endsWith?"(?=".concat(b,")"):"$";else{var I=n[n.length-1],P=typeof I=="string"?y.indexOf(I[I.length-1])>-1:I===void 0;r||(v+="(?:".concat(y,"(?=").concat(b,"))?")),P||(v+="(?=".concat(y,"|").concat(b,")"))}return new RegExp(v,En(t))}function Rn(n,e,t){return n instanceof RegExp?Os(n,e):Array.isArray(n)?Ls(n,e,t):zs(n,e,t)}async function Ds(n,e,t,a,r=an()){const s=n.withConfig({apiVersion:Et});try{const o=new Date(Date.now()+1e3*er),i=`drafts.${r}`,l=jn(),c=s.patch(i).set({secret:l,source:e,studioUrl:t,userId:a});return await s.transaction().createOrReplace({_id:i,_type:sn}).patch(c).commit({tag:Rt}),{secret:l,expiresAt:o}}finally{try{await s.delete({query:tr})}catch(o){console.error("Failed to delete expired secrets",o)}}}function Ns(n){const{draftMode:e,previewMode:t,origin:a=typeof location>"u"?"https://localhost":location.origin}=n,r=(t==null?void 0:t.enable)||(e==null?void 0:e.enable);let{preview:s="/"}=n;const o=new URL(s,a),i=r?new URL(r,a):void 0;return async l=>{try{if(l.previewSearchParam){const p=new URL(l.previewSearchParam,o);p.origin===o.origin&&(s=`${p.pathname}${p.search}`)}}catch{}typeof location<"u"&&location.origin===o.origin&&l.studioBasePath&&(s.startsWith(`${l.studioBasePath}/`)||s===l.studioBasePath)&&(s=n.preview||"/");const c=new URL(s,o);if(i){const p=new URL(i),{searchParams:d}=p;return d.set(St,l.previewUrlSecret),d.set(Fe,l.studioPreviewPerspective),c.pathname!==p.pathname&&d.set(_t,`${c.pathname}${c.search}`),p.toString()}return c.toString()}}const Us=n=>typeof n=="object"&&typeof n.then=="function",Ye=[];function qs(n,e,t=(a,r)=>a===r){if(n===e)return!0;if(!n||!e)return!1;const a=n.length;if(e.length!==a)return!1;for(let r=0;r<a;r++)if(!t(n[r],e[r]))return!1;return!0}function Fs(n,e=null,t=!1,a={}){e===null&&(e=[n]);for(const s of Ye)if(qs(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return a.lifespan&&a.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,a.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:a.equal,remove:()=>{const s=Ye.indexOf(r);s!==-1&&Ye.splice(s,1)},promise:(Us(n)?n:n(...e)).then(s=>{r.response=s,a.lifespan&&a.lifespan>0&&(r.timeout=setTimeout(r.remove,a.lifespan))}).catch(s=>r.error=s)};if(Ye.push(r),!t)throw r.promise}const Cn=(n,e,t)=>Fs(n,e,!1,t);function Vs(n,e){let t=new AbortController,a=[];async function r(o,i){const{result:l,syncTags:c}=await n.fetch(nr,{},{filterResponse:!1,lastLiveEventId:o,tag:"preview-url-secret.fetch-vercel-bypass-protection-secret"});Array.isArray(c)&&(a=c),i.aborted||e(l)}const s=n.live.events().subscribe({next:o=>{o.type==="message"&&(t.abort(),t=new AbortController,o.tags.some(i=>a.includes(i))&&r(o.id,t.signal))},error:o=>console.error(o)});return r(null,t.signal),()=>{s.unsubscribe(),t.abort()}}const Bs=n=>{const e=L.c(3),{comlink:t}=n;let a,r;return e[0]!==t?(a=()=>t.on("visual-editing/features",Ks),r=[t],e[0]=t,e[1]=a,e[2]=r):(a=e[1],r=e[2]),h.useEffect(a,r),null};var Hs=h.memo(Bs);function Ks(){return{features:{optimistic:!0}}}function Tn(n,e){let t;return(...a)=>{clearTimeout(t),t=setTimeout(()=>{n.apply(n,a)},e)}}const Gs=function(n){const e=L.c(14),{comlink:t,children:a}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={},e[0]=r):r=e[0];const s=h.useRef(r);let o,i;e[1]!==t?(o=()=>t==null?void 0:t.on("visual-editing/shared-state",()=>({state:s.current})),i=[t],e[1]=t,e[2]=o,e[3]=i):(o=e[2],i=e[3]),h.useEffect(o,i);let l;e[4]!==t?(l=(y,v)=>{s.current[y]=v,t==null||t.post("presentation/shared-state",{key:y,value:v})},e[4]=t,e[5]=l):l=e[5];const c=l;let p;e[6]!==t?(p=y=>{t==null||t.post("presentation/shared-state",{key:y}),delete s.current[y]},e[6]=t,e[7]=p):p=e[7];const d=p;let f,m;e[8]!==d||e[9]!==c?(m={removeValue:d,setValue:c},e[8]=d,e[9]=c,e[10]=m):m=e[10],f=m;const g=f;let b;return e[11]!==a||e[12]!==g?(b=u.jsx(Cr.Provider,{value:g,children:a}),e[11]=a,e[12]=g,e[13]=b):b=e[13],b},Xs=pe.div`
  overflow: hidden;
  flex-basis: 0;
  flex-shrink: 1;
`,Wt=function(n){const e=L.c(15),{children:t,defaultSize:a,id:r,minWidth:s,maxWidth:o,order:i}=n,l=a===void 0?null:a,c=i===void 0?0:i,p=h.useContext(At);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const{getPanelStyle:d,registerElement:f,unregisterElement:m}=p;let g;e[0]!==d||e[1]!==r?(g=d(r),e[0]=d,e[1]=r,e[2]=g):g=e[2];const b=g;let y,v;e[3]!==l||e[4]!==r||e[5]!==o||e[6]!==s||e[7]!==c||e[8]!==f||e[9]!==m?(y=()=>(f(r,{id:r,type:"panel",defaultSize:l,maxWidth:o??null,minWidth:s??0,order:c}),()=>{m(r)}),v=[r,l,c,o,s,f,m],e[3]=l,e[4]=r,e[5]=o,e[6]=s,e[7]=c,e[8]=f,e[9]=m,e[10]=y,e[11]=v):(y=e[10],v=e[11]),h.useLayoutEffect(y,v);let w;return e[12]!==t||e[13]!==b?(w=u.jsx(Xs,{style:b,children:t}),e[12]=t,e[13]=b,e[14]=w):w=e[14],w},In="presentation/panels",kn=()=>JSON.parse(localStorage.getItem(In)||"{}"),Qs=n=>{localStorage.setItem(In,JSON.stringify(n))},An=n=>n.map(e=>[e.id,e.order].join(":")).join(",");function Ys(){const n=L.c(1);let e;const t=Zs,a=Js;let r;if(n[0]===Symbol.for("react.memo_cache_sentinel")){const s=Tn(a,100);r={get:t,set:a,setDebounced:s},n[0]=r}else r=n[0];return e=r,e}function Js(n,e){const t=kn(),a=An(n),r={...t,[a]:e};Qs(r)}function Zs(n){const e=kn(),t=An(n);return Array.isArray(e[t])&&e[t].some(ea)?void 0:e[t]}function ea(n){return n===null}function wt(n,e,t){const{maxWidth:a,minWidth:r}=n,s=a==null?100:a/t*100,o=r/t*100;return Math.min(s,Math.max(o,e))}function ta(n,e,t,a,r,s){const{panels:o,widths:i}=r,{widths:l}=s,c=l||i,p=[...c];{const g=n<0?a:t,b=o.findIndex(w=>w.id===g.id),y=c[b],v=wt(g,y+Math.abs(n),e);if(y===v)return c;n=n<0?y-v:v-y}let d=0,f=n<0?t:a,m=o.findIndex(g=>g.id===f.id);for(;;){const g=o[m],b=c[m],y=Math.abs(n)-Math.abs(d),v=wt(g,b-y,e);if(b!==v&&(d+=b-v,p[m]=v,d.toPrecision(10).localeCompare(Math.abs(n).toPrecision(10),void 0,{numeric:!0})>=0))break;if(n<0){if(--m<0)break}else if(++m>=o.length)break}return d===0?c:(f=n<0?a:t,m=o.findIndex(g=>g.id===f.id),p[m]=c[m]+d,p)}function na(n,e,t){if(n.length===1)return"100";const a=n.findIndex(s=>s.id===e),r=t[a];return r==null?"0":r.toPrecision(10)}function Kt(n,e,t=0,a=null){const r=n.clientX,s=(a||e.getBoundingClientRect()).left;return r-s-t}function mt(n){return n.type==="panel"}function Gt(n){return n.type==="resizer"}function Xt(n){return Array.from(n.values()).sort(({order:e},{order:t})=>e==null&&t==null?0:e==null?-1:t==null?1:e-t)}function Qt(n,e,t){const a=e.reduce((o,i)=>o+i,0),r=[...e].map(o=>o/a*100);let s=0;for(let o=0;o<n.length;o++){const i=n[o],l=r[o],c=wt(i,l,t);l!=c&&(s+=l-c,r[o]=c)}if(s.toFixed(3)!=="0.000")for(let o=0;o<n.length;o++){const i=n[o];let{maxWidth:l,minWidth:c}=i;c=c/t*100,l!=null&&(l=l/t*100);const p=Math.min(l??100,Math.max(c,r[o]+s));if(p!==r[o]&&(s-=p-r[o],r[o]=p,Math.abs(s).toFixed(3)==="0.000"))break}return r}function ra(n){let e=n.length,t=100;const a=n.map(s=>s.defaultSize?(t-=s.defaultSize,e-=1,s.defaultSize):null),r=t/e;return a.map(s=>s===null?r:s)}const sa=pe.div`
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  width: 100%;
`,aa=function(n){const e=L.c(46),{children:t}=n,a=h.useRef(null);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=new Map,e[0]=r):r=e[0];const[s,o]=h.useState(r);let i,l;e[1]!==s?(l=Xt(s).filter(mt),e[1]=s,e[2]=l):l=e[2],i=l;const c=i;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[3]=p):p=e[3];const[d,f]=h.useState(p),[m,g]=h.useState(null);let b;e[4]!==s||e[5]!==c||e[6]!==d?(b={elements:s,panels:c,widths:d},e[4]=s,e[5]=c,e[6]=d,e[7]=b):b=e[7];const y=h.useRef(b);let v;e[8]!==m||e[9]!==c||e[10]!==d?(v=B=>({flexGrow:na(c,B,d),pointerEvents:m===null?void 0:"none"}),e[8]=m,e[9]=c,e[10]=d,e[11]=v):v=e[11];const w=v;let _;e[12]===Symbol.for("react.memo_cache_sentinel")?(_=(B,F)=>{o(H=>{if(H.has(B))return H;const K=new Map(H);return K.set(B,F),K})},e[12]=_):_=e[12];const x=_;let E;e[13]===Symbol.for("react.memo_cache_sentinel")?(E=B=>{o(F=>{if(!F.has(B))return F;const H=new Map(F);return H.delete(B),H})},e[13]=E):E=e[13];const C=E;let S;e[14]===Symbol.for("react.memo_cache_sentinel")?(S={containerWidth:window.innerWidth,dragOffset:0,panelAfter:null,panelBefore:null,resizerIndex:-1,resizerRect:null,startX:0,widths:[]},e[14]=S):S=e[14];const I=h.useRef(S);let P;e[15]!==s?(P=(B,F)=>{const H=Xt(s),K=H.findIndex(ee=>ee.id===B),se=s.get(B);if(!se||!Gt(se))return;const G=se.el.current;G&&(I.current={resizerIndex:K,panelBefore:H.reduce((ee,J,ae)=>mt(J)&&ae<K?J:ee,null),panelAfter:H.reduce((ee,J,ae)=>ee===null&&mt(J)&&ae>K?J:ee,null),containerWidth:window.innerWidth,startX:F.pageX,dragOffset:Kt(F,G),resizerRect:G.getBoundingClientRect(),widths:y.current.widths},g(B))},e[15]=s,e[16]=P):P=e[16];const j=P;let T;e[17]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{g(null)},e[17]=T):T=e[17];const A=T;let k;e[18]!==s?(k=(B,F)=>{F.preventDefault(),F.stopPropagation();const{containerWidth:H,dragOffset:K,panelBefore:se,panelAfter:G,resizerRect:ee}=I.current;if(se==null||G==null)return;const J=s.get(B);if(!J||!Gt(J))return;const ae=J.el.current;if(!ae)return;const oe=Kt(F,ae,K,ee);if(oe===0)return;const{widths:fe}=y.current,he=a.current.getBoundingClientRect(),_e=oe/he.width*100,me=ta(_e,H,se,G,y.current,I.current);fe.some((je,ge)=>je!==me[ge])&&f(me)},e[18]=s,e[19]=k):k=e[19];const R=k;let M,D;e[20]!==s||e[21]!==c||e[22]!==d?(M=()=>{y.current.elements=s,y.current.panels=c,y.current.widths=d},D=[s,c,d],e[20]=s,e[21]=c,e[22]=d,e[23]=M,e[24]=D):(M=e[23],D=e[24]),h.useLayoutEffect(M,D);const O=Ys();let z,N;e[25]!==c||e[26]!==O?(z=()=>{const{widths:B}=y.current;if(B.length===c.length)return;const F=O.get(c);if(F){const K=Qt(c,F,window.innerWidth);f(K);return}const H=ra(c);f(H)},N=[O,c],e[25]=c,e[26]=O,e[27]=z,e[28]=N):(z=e[27],N=e[28]),h.useLayoutEffect(z,N);let Q,V;e[29]!==c||e[30]!==O||e[31]!==d?(Q=()=>{d.length&&O.setDebounced(c,d)},V=[O,c,d],e[29]=c,e[30]=O,e[31]=d,e[32]=Q,e[33]=V):(Q=e[32],V=e[33]),h.useEffect(Q,V);let Y,re;e[34]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>{const B=new ResizeObserver(()=>{const{panels:F,widths:H}=y.current,K=Qt(F,H,window.innerWidth);H.some((se,G)=>se!==K[G])&&f(K)});return B.observe(a.current),()=>{B.disconnect()}},re=[],e[34]=Y,e[35]=re):(Y=e[34],re=e[35]),h.useLayoutEffect(Y,re);let ie,W;e[36]!==m||e[37]!==R||e[38]!==w||e[39]!==j?(W={activeResizer:m,drag:R,getPanelStyle:w,registerElement:x,startDragging:j,stopDragging:A,unregisterElement:C},e[36]=m,e[37]=R,e[38]=w,e[39]=j,e[40]=W):W=e[40],ie=W;const Z=ie;let ce;e[41]!==t?(ce=u.jsx(sa,{ref:a,children:t}),e[41]=t,e[42]=ce):ce=e[42];let le;return e[43]!==Z||e[44]!==ce?(le=u.jsx(At.Provider,{value:Z,children:ce}),e[43]=Z,e[44]=ce,e[45]=le):le=e[45],le};function Dt(n){const e=L.c(37);let t,a,r,s,o;e[0]!==n?({children:t,message:a,onRetry:s,onContinueAnyway:r,...o}=n,e[0]=n,e[1]=t,e[2]=a,e[3]=r,e[4]=s,e[5]=o):(t=e[1],a=e[2],r=e[3],s=e[4],o=e[5]);const{t:i}=ye(ve);let l;e[6]!==i?(l=i("error-card.retry-button.text"),e[6]=i,e[7]=l):l=e[7];let c;e[8]!==s||e[9]!==l?(c=u.jsx(Se,{mode:"ghost",onClick:s,text:l}),e[8]=s,e[9]=l,e[10]=c):c=e[10];const p=c;let d;e[11]!==i?(d=i("error-card.continue-button.text"),e[11]=i,e[12]=d):d=e[12];let f;e[13]!==r||e[14]!==d?(f=u.jsx(Se,{mode:"ghost",tone:"critical",onClick:r,text:d}),e[13]=r,e[14]=d,e[15]=f):f=e[15];const m=f;let g;e[16]!==i?(g=i("error-card.title"),e[16]=i,e[17]=g):g=e[17];let b;e[18]!==g?(b=u.jsx(X,{size:1,weight:"semibold",children:g}),e[18]=g,e[19]=b):b=e[19];let y;e[20]!==a?(y=u.jsx(X,{muted:!0,size:1,children:a}),e[20]=a,e[21]=y):y=e[21];let v;e[22]!==b||e[23]!==y?(v=u.jsxs(Oe,{space:3,children:[b,y]}),e[22]=b,e[23]=y,e[24]=v):v=e[24];let w;e[25]!==m||e[26]!==r||e[27]!==s||e[28]!==p?(w=s&&r?u.jsxs(Tr,{space:2,children:[p,m]}):s?u.jsx(de,{children:p}):r?u.jsx(de,{children:m}):null,e[25]=m,e[26]=r,e[27]=s,e[28]=p,e[29]=w):w=e[29];let _;e[30]!==t||e[31]!==v||e[32]!==w?(_=u.jsx(ne,{align:"center",height:"fill",justify:"center",children:u.jsx(Ir,{padding:4,sizing:"border",width:0,children:u.jsxs(Oe,{space:4,children:[v,t,w]})})}),e[30]=t,e[31]=v,e[32]=w,e[33]=_):_=e[33];let x;return e[34]!==o||e[35]!==_?(x=u.jsx(ue,{height:"fill",...o,children:_}),e[34]=o,e[35]=_,e[36]=x):x=e[36],x}function oa(n={}){const e=Object.entries(n).map(([t,a])=>`${t}=${a}`).join("&");return e.length?`?${e}`:""}function ia(n){const e=["comment","inspect","instruction","pathKey","rev","since","template","view"],t=Object.entries(n).filter(([a])=>e.includes(a)).reduce((a,[r,s])=>s==null?a:{...a,[r]:s},{});return oa(t)}const ca=h.forwardRef(function(n,e){const t=L.c(11);let a,r;t[0]!==n?({searchParams:r,...a}=n,t[0]=n,t[1]=a,t[2]=r):(a=t[1],r=t[2]);let s;t[3]!==r?(s=Object.entries(r),t[3]=r,t[4]=s):s=t[4];let o;t[5]!==s?(o={type:void 0,_searchParams:s},t[5]=s,t[6]=o):o=t[6];let i;return t[7]!==e||t[8]!==a||t[9]!==o?(i=u.jsx(at,{...a,ref:e,state:o,title:void 0}),t[7]=e,t[8]=a,t[9]=o,t[10]=i):i=t[10],i}),la=h.forwardRef(function(n,e){const t=L.c(15);let a,r,s,o;if(t[0]!==n){const{documentId:p,documentType:d,parentRefPath:f,template:m,searchParams:g,...b}=n;a=p,r=d,o=g,s=b,t[0]=n,t[1]=a,t[2]=r,t[3]=s,t[4]=o}else a=t[1],r=t[2],s=t[3],o=t[4];let i;t[5]!==o?(i=Object.entries(o),t[5]=o,t[6]=i):i=t[6];let l;t[7]!==a||t[8]!==r||t[9]!==i?(l={id:a,type:r,_searchParams:i},t[7]=a,t[8]=r,t[9]=i,t[10]=l):l=t[10];let c;return t[11]!==e||t[12]!==s||t[13]!==l?(c=u.jsx(at,{...s,ref:e,state:l,title:void 0}),t[11]=e,t[12]=s,t[13]=l,t[14]=c):c=t[14],c});function Mn(n){const e=L.c(26),{children:t,onStructureParams:a,structureParams:r,searchParams:s,refs:o}=n,{state:i,resolvePathFromState:l}=kt();let c;e[0]!==i._searchParams?(c=Object.fromEntries(i._searchParams||[]),e[0]=i._searchParams,e[1]=c):c=e[1];const p=hn(c);let d;e[2]!==l||e[3]!==p||e[4]!==i?(d=I=>{const P=l(i),j=ia({...p,...I});return`${P}${j}`},e[2]=l,e[3]=p,e[4]=i,e[5]=d):d=e[5];const f=d;let m,g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g={},e[6]=g):g=e[6];const b=r;let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=[],e[7]=y):y=e[7];let v;e[8]!==o||e[9]!==s?(v=I=>{const{childId:P,...j}=I,T=o==null?void 0:o.find(A=>A._id===P||ot(A._id)===P);return T?u.jsx(at,{...j,state:{id:P,type:T._type,_searchParams:Object.entries(s)}}):u.jsx("div",{...j})},e[8]=o,e[9]=s,e[10]=v):v=e[10];let w,_;e[11]!==s?(w=I=>u.jsx(ca,{...I,searchParams:s}),_=I=>u.jsx(la,{...I,searchParams:s}),e[11]=s,e[12]=w,e[13]=_):(w=e[12],_=e[13]);let x;e[14]!==a?(x=I=>{a({...I,inspect:I.inspect??void 0})},e[14]=a,e[15]=x):x=e[15];let E;e[16]!==f||e[17]!==b||e[18]!==v||e[19]!==w||e[20]!==_||e[21]!==x?(E={index:0,groupIndex:0,siblingIndex:0,payload:g,params:b,hasGroupSiblings:!1,groupLength:1,routerPanesState:y,ChildLink:v,BackLink:w,ReferenceChildLink:_,ParameterizedLink:va,closeCurrentAndAfter:ya,handleEditReference:ga,replaceCurrent:ha,closeCurrent:fa,duplicateCurrent:ma,setView:pa,setParams:x,setPayload:da,navigateIntent:ua,createPathWithParams:f},e[16]=f,e[17]=b,e[18]=v,e[19]=w,e[20]=_,e[21]=x,e[22]=E):E=e[22],m=E;const C=m;let S;return e[23]!==t||e[24]!==C?(S=u.jsx(ns.Provider,{value:C,children:t}),e[23]=t,e[24]=C,e[25]=S):S=e[25],S}function ua(n,e,t){console.warn("navigateIntent",n,e,t)}function da(n){console.warn("setPayload",n)}function pa(n){console.warn("setView",n)}function ma(n){console.warn("duplicateCurrent",n)}function fa(){console.warn("closeCurrent")}function ha(n){console.warn("replaceCurrent",n)}function ga(n){console.warn("handleEditReference",n)}function ya(){console.warn("closeCurrentAndAfter")}function va(){throw new Error("ParameterizedLink not implemented")}const ba=pe(bn)`
  height: 100%;
`,wa=pe(ne)`
  & > div {
    min-width: none !important;
    max-width: none !important;
  }
`,xa=pe(tt)`
  white-space: pre-wrap;
`;function Pa(n){var P,j,T,A;const e=L.c(33),{mainDocumentState:t,onStructureParams:a,searchParams:r,refs:s}=n,{t:o}=ye(ve),{devMode:i}=Tt();let l,c;if(e[0]!==((P=t==null?void 0:t.document)==null?void 0:P._id)||e[1]!==s){let k;e[3]!==((j=t==null?void 0:t.document)==null?void 0:j._id)?(k=R=>{var M;return ot(R._id)!==((M=t==null?void 0:t.document)==null?void 0:M._id)},e[3]=(T=t==null?void 0:t.document)==null?void 0:T._id,e[4]=k):k=e[4],c=s.filter(k).map(_a),e[0]=(A=t==null?void 0:t.document)==null?void 0:A._id,e[1]=s,e[2]=c}else c=e[2];l=c;const p=l;let d,f;e[5]!==p?(f={filter:"_id in $ids",params:{ids:p}},e[5]=p,e[6]=f):f=e[6];let m;e[7]!==o?(m=o("document-list-pane.document-list.title"),e[7]=o,e[8]=m):m=e[8];let g;e[9]!==f||e[10]!==m?(g={id:"$root",options:f,schemaTypeName:"",title:m,type:"documentList"},e[9]=f,e[10]=m,e[11]=g):g=e[11],d=g;const b=d,[y,v]=h.useState(null);let w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=()=>v(null),e[12]=w):w=e[12];const _=w,[x]=h.useState(Sa);let E;e[13]===Symbol.for("react.memo_cache_sentinel")?(E=()=>v(null),e[13]=E):E=e[13];let C;if(e[14]!==s?(C=[s],e[14]=s,e[15]=C):C=e[15],h.useEffect(E,C),y){let k;e[16]!==o?(k=o("document-list-pane.error.text"),e[16]=o,e[17]=k):k=e[17];let R;e[18]!==i||e[19]!==y||e[20]!==o?(R=i&&u.jsx(ue,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(et,{muted:!0,size:0,children:o("presentation-error.label")}),u.jsx(xa,{size:1,children:y.error.message})]})}),e[18]=i,e[19]=y,e[20]=o,e[21]=R):R=e[21];let M;return e[22]!==R||e[23]!==k?(M=u.jsx(Dt,{flex:1,message:k,onRetry:_,children:R}),e[22]=R,e[23]=k,e[24]=M):M=e[24],M}let S;e[25]!==b?(S=u.jsx(wa,{direction:"column",flex:1,children:u.jsx(ts,{index:0,itemId:"$root",pane:b,paneKey:"$root"})}),e[25]=b,e[26]=S):S=e[26];let I;return e[27]!==a||e[28]!==s||e[29]!==r||e[30]!==x||e[31]!==S?(I=u.jsx(xn,{onCatch:v,children:u.jsx(ba,{children:u.jsx(Pn,{children:u.jsx(Mn,{onStructureParams:a,structureParams:x,searchParams:r,refs:s,children:S})})})}),e[27]=a,e[28]=s,e[29]=r,e[30]=x,e[31]=S,e[32]=I):I=e[32],I}function Sa(){return{}}function _a(n){return ot(n._id)}const ja=pe(tt)`
  white-space: pre-wrap;
`;function Ea(n){const e=L.c(35),{documentId:t,documentType:a,onFocusPath:r,onStructureParams:s,searchParams:o,structureParams:i}=n,{template:l,templateParams:c}=i,{t:p}=ye(ve),{devMode:d}=Tt();let f,m;e[0]!==c?(m=rs(c),e[0]=c,e[1]=m):m=e[1];let g;e[2]!==t||e[3]!==a||e[4]!==m||e[5]!==l?(g={id:t,type:a,template:l,templateParameters:m},e[2]=t,e[3]=a,e[4]=m,e[5]=l,e[6]=g):g=e[6];let b;e[7]!==t||e[8]!==g?(b={id:t,options:g,title:"",type:"document"},e[7]=t,e[8]=g,e[9]=b):b=e[9],f=b;const y=f,[v,w]=h.useState(null);let _;e[10]===Symbol.for("react.memo_cache_sentinel")?(_=()=>w(null),e[10]=_):_=e[10];const x=_;let E;e[11]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{w(null)},e[11]=E):E=e[11];let C;if(e[12]!==t||e[13]!==a||e[14]!==i?(C=[t,a,i],e[12]=t,e[13]=a,e[14]=i,e[15]=C):C=e[15],h.useEffect(E,C),v){let T;e[16]!==p?(T=p("document-pane.error.text"),e[16]=p,e[17]=T):T=e[17];let A;e[18]!==d||e[19]!==v||e[20]!==p?(A=d&&u.jsx(ue,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(et,{muted:!0,size:0,children:p("presentation-error.label")}),u.jsx(ja,{size:1,children:v.error.message})]})}),e[18]=d,e[19]=v,e[20]=p,e[21]=A):A=e[21];let k;return e[22]!==T||e[23]!==A?(k=u.jsx(Dt,{flex:1,message:T,onRetry:x,children:A}),e[22]=T,e[23]=A,e[24]=k):k=e[24],k}let S;e[25]===Symbol.for("react.memo_cache_sentinel")?(S={height:"100%"},e[25]=S):S=e[25];let I;e[26]===Symbol.for("react.memo_cache_sentinel")?(I=u.jsx(vn,{}),e[26]=I):I=e[26];let P;e[27]!==r||e[28]!==y?(P=u.jsx(h.Suspense,{fallback:I,children:u.jsx(ss,{paneKey:"document",index:1,itemId:"document",pane:y,onFocusPath:r})}),e[27]=r,e[28]=y,e[29]=P):P=e[29];let j;return e[30]!==s||e[31]!==o||e[32]!==i||e[33]!==P?(j=u.jsx(xn,{onCatch:w,children:u.jsx(bn,{style:S,children:u.jsx(Mn,{searchParams:o,onStructureParams:s,structureParams:i,children:P})})}),e[30]=s,e[31]=o,e[32]=i,e[33]=P,e[34]=j):j=e[34],j}function Ra(n){const e=L.c(7),{documentId:t,documentType:a,onFocusPath:r,onStructureParams:s,searchParams:o,structureParams:i}=n;let l;return e[0]!==t||e[1]!==a||e[2]!==r||e[3]!==s||e[4]!==o||e[5]!==i?(l=u.jsx(Pn,{children:u.jsx(Ea,{documentId:t,documentType:a,onFocusPath:r,onStructureParams:s,searchParams:o,structureParams:i})}),e[0]=t,e[1]=a,e[2]=r,e[3]=s,e[4]=o,e[5]=i,e[6]=l):l=e[6],l}function Ca(n,e){const t=L.c(6),a=Qr();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={},t[0]=r):r=t[0];const[s,o]=h.useState(r);let i,l;return t[1]!==n||t[2]!==a||t[3]!==e?(i=()=>{if(!e)return;const c=Yr(a,e,n).subscribe(p=>{o(p)});return()=>{c==null||c.unsubscribe()}},l=[a,e,n],t[1]=n,t[2]=a,t[3]=e,t[4]=i,t[5]=l):(i=t[4],l=t[5]),h.useEffect(i,l),s}function Ta(n){var S,I,P,j,T,A,k,R;const e=L.c(38),{documentId:t,documentType:a,mainDocumentState:r,onFocusPath:s,onStructureParams:o,refs:i,searchParams:l,structureParams:c}=n,{t:p}=ye(ve),d=Dr();let f;e[0]!==((S=r==null?void 0:r.document)==null?void 0:S._id)||e[1]!==((I=r==null?void 0:r.document)==null?void 0:I._type)||e[2]!==l?(f=M=>{var D,O;return u.jsx(at,{...M,state:{id:(D=r==null?void 0:r.document)==null?void 0:D._id,type:(O=r==null?void 0:r.document)==null?void 0:O._type,_searchParams:Object.entries(l)}})},e[0]=(P=r==null?void 0:r.document)==null?void 0:P._id,e[1]=(j=r==null?void 0:r.document)==null?void 0:j._type,e[2]=l,e[3]=f):f=e[3];const m=f;let g,b;e[4]!==((T=r==null?void 0:r.document)==null?void 0:T._type)||e[5]!==d?(b=d.get(((A=r==null?void 0:r.document)==null?void 0:A._type)||"shoe"),e[4]=(k=r==null?void 0:r.document)==null?void 0:k._type,e[5]=d,e[6]=b):b=e[6],g=b;const y=g,v=Ca(((R=r==null?void 0:r.document)==null?void 0:R._id)||"",y);let w;e:{if(!(r!=null&&r.document)){w=null;break e}const M=r.document;let D;e[7]!==v.snapshot||e[8]!==M?(D=Nr({document:M,snapshot:v.snapshot}),e[7]=v.snapshot,e[8]=M,e[9]=D):D=e[9];let O;e[10]!==p?(O=p("main-document.label"),e[10]=p,e[11]=O):O=e[11];let z;e[12]!==O?(z=u.jsx(ue,{padding:1,radius:2,shadow:1,children:u.jsx(X,{muted:!0,size:0,weight:"medium",children:O})}),e[12]=O,e[13]=z):z=e[13];let N;e[14]!==y||e[15]!==D||e[16]!==z?(N=u.jsx(Ur,{...D,schemaType:y,status:z}),e[14]=y,e[15]=D,e[16]=z,e[17]=N):N=e[17],w=N}const _=w;if(t&&a){let M;return e[18]!==t||e[19]!==a||e[20]!==s||e[21]!==o||e[22]!==l||e[23]!==c?(M=u.jsx(Ra,{documentId:t,documentType:a,onFocusPath:s,onStructureParams:o,searchParams:l,structureParams:c}),e[18]=t,e[19]=a,e[20]=s,e[21]=o,e[22]=l,e[23]=c,e[24]=M):M=e[24],M}let x;e[25]!==m||e[26]!==r||e[27]!==_||e[28]!==p?(x=r&&u.jsx(ue,{padding:3,tone:r.document?"inherit":"caution",children:r.document?u.jsx(qr,{__unstable_focusRing:!0,as:m,"data-as":"a",radius:2,sizing:"border",tone:"inherit",children:_}):u.jsx(ue,{padding:2,radius:2,tone:"inherit",children:u.jsxs(ne,{gap:3,children:[u.jsx(de,{flex:"none",children:u.jsx(X,{size:1,children:u.jsx(Fr,{})})}),u.jsx(de,{flex:1,children:u.jsx(X,{size:1,children:u.jsx(Vr,{t:p,i18nKey:"main-document.missing.text",components:{Code:"code"},values:{path:r.path}})})})]})})}),e[25]=m,e[26]=r,e[27]=_,e[28]=p,e[29]=x):x=e[29];let E;e[30]!==r||e[31]!==o||e[32]!==i||e[33]!==l?(E=u.jsx(Pa,{mainDocumentState:r,onStructureParams:o,searchParams:l,refs:i}),e[30]=r,e[31]=o,e[32]=i,e[33]=l,e[34]=E):E=e[34];let C;return e[35]!==x||e[36]!==E?(C=u.jsxs(ne,{direction:"column",flex:1,height:"fill",children:[x,E]}),e[35]=x,e[36]=E,e[37]=C):C=e[37],C}function Ia(n){const e=L.c(2);let t;e[0]!==n?(t=()=>n||We(),e[0]=n,e[1]=t):t=e[1];const[a]=h.useState(t);return a}const ka=pe.div`
  position: relative;
`,Aa=pe.div`
  position: absolute;
  top: 0;
  bottom: 0;
  left: -5px;
  width: 9px;
  z-index: 10;
  cursor: ${({$disabled:n})=>n?"auto":"ew-resize"};

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  ${({$disabled:n})=>!n&&`
    /* Hover effect */
    & > span:nth-child(2) {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    @media (hover: hover) {
      &:hover > span:nth-child(2) {
        opacity: 0.2;
      }
    }
  `}
`,$n=function(n){const e=L.c(27),{id:t,order:a,disabled:r}=n,s=r===void 0?!1:r,o=h.useRef(null),i=h.useContext(At);if(i===null)throw Error("Panel components must be rendered within a PanelGroup container");const l=Ia(t),{activeResizer:c,drag:p,startDragging:d,stopDragging:f,registerElement:m,unregisterElement:g}=i,b=c===l;if(i===null)throw Error("Panel components must be rendered within a PanelGroup container");let y;e[0]!==l||e[1]!==d?(y=R=>{d(l,R.nativeEvent)},e[0]=l,e[1]=d,e[2]=y):y=e[2];const v=y;let w;e[3]!==p||e[4]!==l?(w=R=>{p(l,R)},e[3]=p,e[4]=l,e[5]=w):w=e[5];const _=w;let x;e[6]!==f?(x=()=>{o.current.blur(),f()},e[6]=f,e[7]=x):x=e[7];const E=x;let C,S;e[8]!==s||e[9]!==b||e[10]!==_||e[11]!==E?(C=()=>{if(!b||s)return;const R=function(){const M=document.body.style,D=document.documentElement.style,{cursor:O}=D,{userSelect:z}=M;return D.cursor="ew-resize",M.userSelect="none",()=>{O?D.cursor=O:D.removeProperty("cursor"),z?M.userSelect=z:M.removeProperty("user-select")}}();return window.addEventListener("mousemove",_),window.addEventListener("mouseup",E),window.addEventListener("contextmenu",E),()=>{R(),window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",E),window.removeEventListener("contextmenu",E)}},S=[s,b,_,E],e[8]=s,e[9]=b,e[10]=_,e[11]=E,e[12]=C,e[13]=S):(C=e[12],S=e[13]),h.useEffect(C,S);let I,P;e[14]!==l||e[15]!==a||e[16]!==m||e[17]!==g?(I=()=>(m(l,{id:l,order:a,type:"resizer",el:o}),()=>{g(l)}),P=[l,a,m,g],e[14]=l,e[15]=a,e[16]=m,e[17]=g,e[18]=I,e[19]=P):(I=e[18],P=e[19]),h.useLayoutEffect(I,P);let j,T;e[20]===Symbol.for("react.memo_cache_sentinel")?(T=u.jsx("span",{}),j=u.jsx("span",{}),e[20]=j,e[21]=T):(j=e[20],T=e[21]);let A;e[22]!==s?(A=u.jsxs(Aa,{$disabled:s,children:[T,j]}),e[22]=s,e[23]=A):A=e[23];let k;return e[24]!==v||e[25]!==A?(k=u.jsx(ka,{onMouseDown:v,ref:o,children:A}),e[24]=v,e[25]=A,e[26]=k):k=e[26],k},Ma=n=>{const e=L.c(8),{documentId:t,setDisplayedDocument:a,getCommentIntent:r}=n;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=u.jsx($n,{order:4}),e[0]=s):s=e[0];let o;e[1]!==r||e[2]!==n.children?(o=u.jsx(Br,{getIntent:r,children:n.children}),e[1]=r,e[2]=n.children,e[3]=o):o=e[3];let i;return e[4]!==t||e[5]!==a||e[6]!==o?(i=u.jsxs(u.Fragment,{children:[s,u.jsx(Wt,{id:"content",minWidth:325,order:5,children:u.jsx(os,{documentId:t,setDisplayedDocument:a,children:o})})]}),e[4]=t,e[5]=a,e[6]=o,e[7]=i):i=e[7],i},$a=n=>{const e=L.c(14),{documentId:t,documentsOnPage:a,documentType:r,getCommentIntent:s,mainDocumentState:o,onFocusPath:i,onStructureParams:l,searchParams:c,setDisplayedDocument:p,structureParams:d}=n;let f;e[0]!==t||e[1]!==r||e[2]!==a||e[3]!==o||e[4]!==i||e[5]!==l||e[6]!==c||e[7]!==d?(f=u.jsx(Ta,{documentId:t,documentType:r,mainDocumentState:o,onFocusPath:i,onStructureParams:l,refs:a,searchParams:c,structureParams:d}),e[0]=t,e[1]=r,e[2]=a,e[3]=o,e[4]=i,e[5]=l,e[6]=c,e[7]=d,e[8]=f):f=e[8];let m;return e[9]!==t||e[10]!==s||e[11]!==p||e[12]!==f?(m=u.jsx(Ma,{documentId:t,getCommentIntent:s,setDisplayedDocument:p,children:f}),e[9]=t,e[10]=s,e[11]=p,e[12]=f,e[13]=m):m=e[13],m},Oa=function(n){const e=L.c(5),{children:t,navigate:a}=n;let r;e[0]!==a?(r=(i,l)=>{a((l===void 0?void 0:l)||{},i?{preview:i}:{})},e[0]=a,e[1]=r):r=e[1];const s=r;let o;return e[2]!==t||e[3]!==s?(o=u.jsx(kr.Provider,{value:s,children:t}),e[2]=t,e[3]=s,e[4]=o):o=e[4],o};function La(n,e){const t=L.c(9);let a;t[0]!==e||t[1]!==n?(a=()=>JSON.parse(localStorage.getItem(n)??JSON.stringify(e)),t[0]=e,t[1]=n,t[2]=a):a=t[2];const[r,s]=h.useState(a);let o,i;t[3]!==n||t[4]!==r?(o=()=>{localStorage.setItem(n,JSON.stringify(r))},i=[n,r],t[3]=n,t[4]=r,t[5]=o,t[6]=i):(o=t[5],i=t[6]),h.useEffect(o,i);let l;return t[7]!==r?(l=[r,s],t[7]=r,t[8]=l):l=t[8],l}function za(n){const e=L.c(11),{unstable_navigator:t}=n,a=!!(t!=null&&t.component),[r,s]=La("presentation/navigator",a),o=a?r:!1;let i;e:{if(!a){i=void 0;break e}let m;e[0]!==s?(m=()=>s(Wa),e[0]=s,e[1]=m):m=e[1],i=m}const l=i;let c;e[2]!==o||e[3]!==t?(c=function(){return u.jsx(u.Fragment,{children:o&&u.jsx(Na,{...t})})},e[2]=o,e[3]=t,e[4]=c):c=e[4];const p=c;let d;e[5]!==o||e[6]!==l?(d={navigatorEnabled:o,toggleNavigator:l},e[5]=o,e[6]=l,e[7]=d):d=e[7];let f;return e[8]!==p||e[9]!==d?(f=[d,p],e[8]=p,e[9]=d,e[10]=f):f=e[10],f}function Wa(n){return!n}function Da(n){const e=L.c(11),{minWidth:t,maxWidth:a,component:r}=n,s=t!=null&&a!=null&&t===a;let o;e[0]!==r?(o=u.jsx(r,{}),e[0]=r,e[1]=o):o=e[1];let i;e[2]!==a||e[3]!==t||e[4]!==o?(i=u.jsx(Wt,{id:"navigator",minWidth:t,maxWidth:a,order:1,children:o}),e[2]=a,e[3]=t,e[4]=o,e[5]=i):i=e[5];let l;e[6]!==s?(l=u.jsx($n,{order:2,disabled:s}),e[6]=s,e[7]=l):l=e[7];let c;return e[8]!==i||e[9]!==l?(c=u.jsxs(u.Fragment,{children:[i,l]}),e[8]=i,e[9]=l,e[10]=c):c=e[10],c}const Na=h.memo(Da),Ua=function(n){const e=L.c(3),{children:t,params:a}=n;let r;r=a;const s=r;let o;return e[0]!==t||e[1]!==s?(o=u.jsx(Ar.Provider,{value:s,children:t}),e[0]=t,e[1]=s,e[2]=o):o=e[2],o},qa=function(n){const e=L.c(10),{children:t,devMode:a,name:r,navigate:s,params:o,searchParams:i,structureParams:l}=n;let c,p;e[0]!==a||e[1]!==r||e[2]!==s||e[3]!==o||e[4]!==i||e[5]!==l?(p={devMode:a,name:r,navigate:s,params:o,searchParams:i,structureParams:l},e[0]=a,e[1]=r,e[2]=s,e[3]=o,e[4]=i,e[5]=l,e[6]=p):p=e[6],c=p;const d=c;let f;return e[7]!==t||e[8]!==d?(f=u.jsx(Mr.Provider,{value:d,children:t}),e[7]=t,e[8]=d,e[9]=f):f=e[9],f};function Nt(n){return Array.isArray(n)?n.join(","):n}const Fa=Be.create(pe.iframe`
  box-shadow: 0 0 0 1px var(--card-border-color);
  border: 0;
  max-height: 100%;
  width: 100%;
  view-transition-class: presentation-tool-iframe;
`),Va=pe(de)`
  position: absolute;
  inset: 0;
  background: transparent;
`,Ba=h.forwardRef(function(n,e){const t=L.c(16),{animate:a,initial:r,onLoad:s,preventClick:o,src:i,variants:l,style:c}=n,p=`presentation-tool-iframe-${h.useId().replace(/[^a-zA-Z0-9-_]/g,"_")}`;let d;t[0]!==c||t[1]!==p?(d={...c,viewTransitionName:p},t[0]=c,t[1]=p,t[2]=d):d=t[2];let f;t[3]!==a||t[4]!==r||t[5]!==s||t[6]!==e||t[7]!==i||t[8]!==d||t[9]!==l?(f=u.jsx(Fa,{style:d,animate:a,initial:r,onLoad:s,ref:e,src:i,variants:l}),t[3]=a,t[4]=r,t[5]=s,t[6]=e,t[7]=i,t[8]=d,t[9]=l,t[10]=f):f=t[10];let m;t[11]!==o?(m=o&&u.jsx(Va,{}),t[11]=o,t[12]=m):m=t[12];let g;return t[13]!==f||t[14]!==m?(g=u.jsxs(u.Fragment,{children:[f,m]}),t[13]=f,t[14]=m,t[15]=g):g=t[15],g});function Ha(n){const e=L.c(16),{openPopup:t,previewLocationOrigin:a,previewLocationRoute:r}=n,{t:s}=ye(ve);let o;e[0]!==t?(o=b=>{b.preventDefault(),t(b.currentTarget.href)},e[0]=t,e[1]=o):o=e[1];const i=o;let l;e[2]!==s?(l=s("share-url.menu-item.open.text"),e[2]=s,e[3]=l):l=e[3];let c;e[4]!==l?(c=u.jsx(X,{size:1,children:l}),e[4]=l,e[5]=c):c=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=["bottom-start"],e[6]=p):p=e[6];let d;e[7]!==s?(d=s("share-url.menu-item.open.text"),e[7]=s,e[8]=d):d=e[8];const f=`${a}${r}`;let m;e[9]!==i||e[10]!==d||e[11]!==f?(m=u.jsx(Se,{as:"a","aria-label":d,icon:Jr,mode:"bleed",href:f,rel:"opener",target:"_blank",tooltipProps:null,onClick:i}),e[9]=i,e[10]=d,e[11]=f,e[12]=m):m=e[12];let g;return e[13]!==c||e[14]!==m?(g=u.jsx(qe,{animate:!0,content:c,fallbackPlacements:p,placement:"bottom",portal:!0,children:m}),e[13]=c,e[14]=m,e[15]=g):g=e[15],g}const Ka=function(n){var z;const e=L.c(27),{fontSize:t,onChange:a,origin:r,padding:s,prefix:o,suffix:i,value:l}=n,c=t===void 0?1:t,p=s===void 0?3:s,{t:d}=ye(ve),{basePath:f}=((z=wn())==null?void 0:z.activeWorkspace)||{},m=f===void 0?"/":f,g=h.useRef(null),[b,y]=h.useState(void 0),[v,w]=h.useState(void 0);let _;e[0]===Symbol.for("react.memo_cache_sentinel")?(_=N=>{y(N.currentTarget.value)},e[0]=_):_=e[0];const x=_;let E;e[1]!==m||e[2]!==a||e[3]!==r||e[4]!==b||e[5]!==d?(E=N=>{var Q;if(N.key==="Enter"){if(b===void 0)return;const V=b.startsWith("/")||b===""?`${r}${b}`:b;if(!V.startsWith(`${r}/`)&&V!==r){w(d("preview-location-input.error",{origin:r,context:"missing-origin"}));return}if(!r&&(V.startsWith(`${m}/`)||V===m)){w(d("preview-location-input.error",{basePath:m,context:"same-base-path"}));return}const Y=V===r?`${r}/`:V;w(void 0),y(void 0),a(Y.slice(r.length)),(Q=g.current)==null||Q.blur()}N.key==="Escape"&&(w(void 0),y(void 0))},e[1]=m,e[2]=a,e[3]=r,e[4]=b,e[5]=d,e[6]=E):E=e[6];const C=E;let S;e[7]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{w(void 0),y(void 0)},e[7]=S):S=e[7];const I=S;let P;e[8]===Symbol.for("react.memo_cache_sentinel")?(P=()=>{w(void 0),y(void 0)},e[8]=P):P=e[8];let j;e[9]!==r||e[10]!==l?(j=[r,l],e[9]=r,e[10]=l,e[11]=j):j=e[11],h.useEffect(P,j);let T,A;e[12]===Symbol.for("react.memo_cache_sentinel")?(A={icon:Zr},e[12]=A):A=e[12],T=A;const k=v?T:void 0;let R;e[13]!==r||e[14]!==l?(R=()=>{w(void 0),y(r+l)},e[13]=r,e[14]=l,e[15]=R):R=e[15];let M;e[16]===Symbol.for("react.memo_cache_sentinel")?(M={zIndex:1},e[16]=M):M=e[16];const D=b===void 0?`${r}${l}`:b;let O;return e[17]!==v||e[18]!==c||e[19]!==C||e[20]!==p||e[21]!==o||e[22]!==i||e[23]!==k||e[24]!==R||e[25]!==D?(O=u.jsx(u.Fragment,{children:u.jsx(es,{clearButton:k,customValidity:v,fontSize:c,onBlur:I,onClear:R,onChange:x,onKeyDownCapture:C,padding:p,prefix:o,style:M,radius:2,ref:g,space:p,suffix:i,value:D})}),e[17]=v,e[18]=c,e[19]=C,e[20]=p,e[21]=o,e[22]=i,e[23]=k,e[24]=R,e[25]=D,e[26]=O):O=e[26],O},Ga=h.lazy(()=>Ae(()=>import("./QRCodeSVG-D2G975de.js"),__vite__mapDeps([0,1]))),xt=24,Xa=16,Qa=224,Ya=pe($r)`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: ${xt}px;
  width: ${xt}px;
`,Ja=Be.create(Ze),Za=Be.create(X),eo=Be.create(Ya),On=h.memo(function(n){const{canToggleSharePreviewAccess:e,canUseSharedPreviewAccess:t,initialUrl:a,previewLocationRoute:r,perspective:s}=n,{t:o}=ye(ve),{push:i}=on(),l=He({apiVersion:Ke}),c=Ct(),[p,d]=h.useState(!0),[f,m]=h.useState(!1),[g,b]=h.useState(!1),[y,v]=h.useState(null),w=f||g||p,_=h.useMemo(()=>y?Cs(a,y,r,Nt(s)):null,[a,s,r,y]),[x,E]=h.useState(null);if(x)throw x;const C=h.useCallback(()=>{i({closable:!0,status:"warning",title:o("share-preview-menu.error_toggle-sharing",{context:"toggle-sharing"})})},[i,o]),S=h.useCallback(async()=>{try{b(!0),await Is(l,"@sanity/presentation",typeof window>"u"?"":location.href,c==null?void 0:c.id),v(null)}catch(j){E(j)}finally{b(!1)}},[l,c==null?void 0:c.id]),I=h.useCallback(async()=>{try{m(!0);const j=await Ts(l,"@sanity/presentation",typeof window>"u"?"":location.href,c==null?void 0:c.id);v(j.secret)}catch(j){E(j)}finally{m(!1)}},[l,c==null?void 0:c.id]),P=h.useCallback(()=>{try{if(!_)throw new Error("No URL to copy");navigator.clipboard.writeText(_.toString()),i({closable:!0,status:"success",title:o("share-url.clipboard.status",{context:"success"})})}catch(j){E(j)}},[i,o,_]);return h.useEffect(()=>{let j=new AbortController,T=[];async function A(R,M){const{result:D,syncTags:O}=await l.fetch(hr,{},{filterResponse:!1,lastLiveEventId:R,tag:"presentation.fetch-shared-access-secret"});Array.isArray(O)&&(T=O),M.aborted||v(D)}const k=l.live.events().subscribe({next:R=>{R.type==="message"&&(j.abort(),j=new AbortController,R.tags.some(M=>T.includes(M))&&A(R.id,j.signal))},error:E});return A(null,j.signal).finally(()=>d(!1)),()=>{k.unsubscribe(),j.abort()}},[l]),u.jsx(rr,{button:u.jsx(Se,{"aria-label":o("preview-frame.share-button.aria-label"),icon:sr,mode:"bleed",tooltipProps:null}),id:"share-menu",menu:u.jsx(ar,{style:{maxWidth:248},padding:t?void 0:0,children:t?u.jsxs(u.Fragment,{children:[u.jsx("label",{style:{cursor:"pointer"},children:u.jsxs(or,{columns:2,rows:2,gapX:3,gapY:1,style:{justifyContent:"center",alignItems:"center",gridTemplateColumns:"min-content 1fr",gridTemplateRows:"min-content"},paddingTop:3,paddingX:3,children:[u.jsx(qe,{animate:!0,content:u.jsx(X,{size:1,children:o("share-preview-menu.toggle-button.tooltip",{context:_?"disable":"enable"})}),fallbackPlacements:["bottom-start"],placement:"bottom",portal:!0,children:u.jsx(cn,{checked:f||_!==null&&!g,readOnly:f||g,indeterminate:p,onChange:e?_?S:I:C})}),u.jsx(X,{size:1,weight:"medium",children:o("share-preview-menu.toggle-button.label",{context:"first-line"})}),u.jsx("span",{}),u.jsx(X,{muted:!0,size:1,children:o("share-preview-menu.toggle-button.label",{context:"second-line"})})]})}),u.jsx(de,{padding:3,paddingTop:2,children:u.jsxs(Oe,{space:3,children:[u.jsx(ue,{tone:w||!_?"transparent":void 0,style:{position:"relative",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(ln,{children:w?u.jsx(Ja,{muted:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}):_?u.jsx(u.Fragment,{children:u.jsxs(h.Suspense,{fallback:u.jsx(Ze,{}),children:[u.jsx(Ga,{title:o("share-preview-menu.qr-code.title",{url:_.toString()}),value:_.toString(),size:Qa,color:"var(--card-fg-color)",logoSize:xt+Xa}),u.jsx(eo,{initial:{opacity:-.5},animate:{opacity:1.5},exit:{opacity:0}})]})}):u.jsx(Za,{muted:!0,size:1,style:{maxWidth:"100px",textWrap:"pretty",textAlign:"center"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o("share-preview-menu.qr-code.placeholder")})})}),u.jsx(X,{muted:!0,size:1,children:o("share-preview-menu.qr-code.instructions")})]})}),u.jsx(ir,{}),u.jsx(cr,{disabled:!_||g,icon:lr,onClick:P,text:o("share-preview-menu.copy-url.text")})]}):u.jsx(ue,{padding:2,tone:"caution",radius:3,children:u.jsx(X,{style:{textWrap:"pretty"},children:o("share-preview-menu.error",{context:"missing-grants"})})})}),popover:{constrainSize:!0,placement:"bottom",portal:!0}})});On.displayName="Memo(SharePreviewMenu)";const to=n=>{const e=L.c(97),{canSharePreviewAccess:t,canToggleSharePreviewAccess:a,canUseSharedPreviewAccess:r,dispatch:s,iframe:o,iframeRef:i,initialUrl:l,navigatorEnabled:c,onPathChange:p,onRefresh:d,openPopup:f,overlaysConnection:m,perspective:g,previewUrl:b,setViewport:y,targetOrigin:v,toggleNavigator:w,toggleOverlay:_,viewport:x,visualEditing:E}=n,{overlaysEnabled:C}=E,{t:S}=ye(ve);let I;e[0]!==y||e[1]!==x?(I=()=>y(x==="desktop"?"mobile":"desktop"),e[0]=y,e[1]=x,e[2]=I):I=e[2];const P=I;let j;j=v===location.origin?"":v;const T=j;let A;e[3]!==s||e[4]!==i.current||e[5]!==d||e[6]!==b||e[7]!==v?(A=()=>{d(()=>{i.current&&(s({type:un}),Object.assign(i.current,{src:`${v}${b||"/"}`}))})},e[3]=s,e[4]=i.current,e[5]=d,e[6]=b,e[7]=v,e[8]=A):A=e[8];const k=A;let R;const M=new URL(b||"/",v),{pathname:D,search:O}=Rs(M);R=`${D}${O}`;const z=R;let N;e[9]===Symbol.for("react.memo_cache_sentinel")?(N={width:"100%"},e[9]=N):N=e[9];let Q;e[10]!==c||e[11]!==S||e[12]!==w?(Q=w&&u.jsx(Se,{"aria-label":S("preview-frame.navigator.toggle-button.aria-label"),icon:zr,mode:"bleed",onClick:w,selected:c,tooltipProps:{content:u.jsx(X,{size:1,children:S("preview-frame.navigator.toggle-button.tooltip")}),fallbackPlacements:["bottom-start"],placement:"bottom"}}),e[10]=c,e[11]=S,e[12]=w,e[13]=Q):Q=e[13];let V;e[14]===Symbol.for("react.memo_cache_sentinel")?(V={whiteSpace:"nowrap"},e[14]=V):V=e[14];const Y=C?"disable":"enable";let re;e[15]!==S||e[16]!==Y?(re=S("preview-frame.overlay.toggle-button.tooltip",{context:Y}),e[15]=S,e[16]=Y,e[17]=re):re=e[17];let ie;e[18]!==re?(ie=u.jsx(de,{padding:1,children:u.jsx(X,{size:1,children:re})}),e[18]=re,e[19]=ie):ie=e[19];let W;e[20]===Symbol.for("react.memo_cache_sentinel")?(W=u.jsx(de,{paddingY:1,children:u.jsx(Hr,{keys:["Alt"],style:{marginTop:-4,marginBottom:-4}})}),e[20]=W):W=e[20];let Z;e[21]!==ie?(Z=u.jsxs(ne,{align:"center",style:V,children:[ie,W]}),e[21]=ie,e[22]=Z):Z=e[22];let ce;e[23]===Symbol.for("react.memo_cache_sentinel")?(ce=["bottom-start"],e[23]=ce):ce=e[23];let le;e[24]===Symbol.for("react.memo_cache_sentinel")?(le={lineHeight:0,borderRadius:999,userSelect:"none"},e[24]=le):le=e[24];const B=C?"transparent":void 0;let F;e[25]===Symbol.for("react.memo_cache_sentinel")?(F={margin:-4},e[25]=F):F=e[25];const H=o.status==="loading"||m!=="connected";let K;e[26]!==C||e[27]!==H||e[28]!==_?(K=u.jsx("div",{style:F,children:u.jsx(cn,{checked:C,onChange:_,disabled:H})}),e[26]=C,e[27]=H,e[28]=_,e[29]=K):K=e[29];const se=!C;let G;e[30]!==S?(G=S("preview-frame.overlay.toggle-button.text"),e[30]=S,e[31]=G):G=e[31];let ee;e[32]!==se||e[33]!==G?(ee=u.jsx(de,{children:u.jsx(X,{muted:se,size:1,weight:"medium",children:G})}),e[32]=se,e[33]=G,e[34]=ee):ee=e[34];let J;e[35]!==K||e[36]!==ee?(J=u.jsxs(ne,{align:"center",gap:3,children:[K,ee]}),e[35]=K,e[36]=ee,e[37]=J):J=e[37];let ae;e[38]!==B||e[39]!==J?(ae=u.jsx(ue,{as:"label",flex:"none",padding:3,marginX:1,style:le,tone:B,children:J}),e[38]=B,e[39]=J,e[40]=ae):ae=e[40];let oe;e[41]!==Z||e[42]!==ae?(oe=u.jsx(qe,{animate:!0,content:Z,fallbackPlacements:ce,placement:"bottom",portal:!0,children:ae}),e[41]=Z,e[42]=ae,e[43]=oe):oe=e[43];let fe;e[44]!==o.status||e[45]!==S?(fe=o.status==="loaded"?S("preview-frame.refresh-button.tooltip"):S("preview-frame.status",{context:o.status}),e[44]=o.status,e[45]=S,e[46]=fe):fe=e[46];let he;e[47]!==fe?(he=u.jsx(X,{size:1,children:fe}),e[47]=fe,e[48]=he):he=e[48];let _e;e[49]===Symbol.for("react.memo_cache_sentinel")?(_e=["bottom-end"],e[49]=_e):_e=e[49];let me;e[50]!==S?(me=S("preview-frame.refresh-button.aria-label"),e[50]=S,e[51]=me):me=e[51];const je=o.status==="reloading"||o.status==="refreshing";let ge;e[52]!==k||e[53]!==me||e[54]!==je?(ge=u.jsx(Se,{"aria-label":me,icon:Kr,mode:"bleed",loading:je,onClick:k,tooltipProps:null}),e[52]=k,e[53]=me,e[54]=je,e[55]=ge):ge=e[55];let Ee;e[56]!==he||e[57]!==ge?(Ee=u.jsx(de,{padding:1,children:u.jsx(qe,{animate:!0,content:he,fallbackPlacements:_e,placement:"bottom",portal:!0,children:ge})}),e[56]=he,e[57]=ge,e[58]=Ee):Ee=e[58];let be;e[59]!==f||e[60]!==T||e[61]!==z?(be=u.jsx(de,{padding:1,children:u.jsx(Ha,{openPopup:f,previewLocationOrigin:T,previewLocationRoute:z})}),e[59]=f,e[60]=T,e[61]=z,e[62]=be):be=e[62];let Re;e[63]!==p||e[64]!==T||e[65]!==z||e[66]!==Ee||e[67]!==be?(Re=u.jsx(de,{flex:1,children:u.jsx(Ka,{prefix:Ee,onChange:p,origin:T,suffix:be,value:z})}),e[63]=p,e[64]=T,e[65]=z,e[66]=Ee,e[67]=be,e[68]=Re):Re=e[68];const Le=x==="desktop"?"narrow":"full";let Ce;e[69]!==S||e[70]!==Le?(Ce=S("preview-frame.viewport-button.tooltip",{context:Le}),e[69]=S,e[70]=Le,e[71]=Ce):Ce=e[71];let Te;e[72]!==Ce?(Te=u.jsx(X,{size:1,children:Ce}),e[72]=Ce,e[73]=Te):Te=e[73];let Me;e[74]===Symbol.for("react.memo_cache_sentinel")?(Me=["bottom-start"],e[74]=Me):Me=e[74];let we;e[75]!==S?(we=S("preview-frame.viewport-button.aria-label"),e[75]=S,e[76]=we):we=e[76];const ze=x==="desktop"?Gr:Xr;let xe;e[77]!==we||e[78]!==ze||e[79]!==P?(xe=u.jsx(Se,{"aria-label":we,icon:ze,mode:"bleed",onClick:P,tooltipProps:null}),e[77]=we,e[78]=ze,e[79]=P,e[80]=xe):xe=e[80];let Pe;e[81]!==Te||e[82]!==xe?(Pe=u.jsx(ne,{align:"center",flex:"none",gap:1,children:u.jsx(qe,{animate:!0,content:Te,fallbackPlacements:Me,placement:"bottom",portal:!0,children:xe})}),e[81]=Te,e[82]=xe,e[83]=Pe):Pe=e[83];let $;e[84]!==t||e[85]!==a||e[86]!==r||e[87]!==l||e[88]!==g||e[89]!==z?($=t&&u.jsx(ne,{align:"center",flex:"none",gap:1,children:u.jsx(On,{canToggleSharePreviewAccess:a,canUseSharedPreviewAccess:r,previewLocationRoute:z,initialUrl:l,perspective:g})}),e[84]=t,e[85]=a,e[86]=r,e[87]=l,e[88]=g,e[89]=z,e[90]=$):$=e[90];let q;return e[91]!==oe||e[92]!==Re||e[93]!==Pe||e[94]!==$||e[95]!==Q?(q=u.jsxs(ne,{align:"center",gap:1,paddingX:1,style:N,children:[Q,oe,Re,Pe,$]}),e[91]=oe,e[92]=Re,e[93]=Pe,e[94]=$,e[95]=Q,e[96]=q):q=e[96],q};function no(n){var c;const e=L.c(7),t=ro,a=(c=n.options)==null?void 0:c.component;let r;e[0]!==a||e[1]!==n?(r=a?u.jsx(a,{...n,renderDefault:t}):t(n),e[0]=a,e[1]=n,e[2]=r):r=e[2];const s=r;let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o={position:"relative"},e[3]=o):o=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i={minHeight:0},e[4]=i):i=e[4];let l;return e[5]!==s?(l=u.jsx(ue,{flex:"none",padding:2,borderBottom:!0,style:o,children:u.jsx(ne,{align:"center",style:i,children:s})}),e[5]=s,e[6]=l):l=e[6],l}function ro(n){return u.jsx(to,{...n})}const ft=Be.create(ne),Ln=h.memo(h.forwardRef(function(n,e){const{dispatch:t,iframe:a,header:r,initialUrl:s,loadersConnection:o,overlaysConnection:i,perspective:l,viewport:c,vercelProtectionBypass:p}=n,[d,f]=h.useState(null),m=Nt(d===null?l:d),g=h.useMemo(()=>{const W=new URL(s);return W.searchParams.get(Fe)||W.searchParams.set(Fe,m),(p||W.searchParams.get(Ne))&&W.searchParams.set(jt,"samesitenone"),p&&!W.searchParams.get(Ne)&&W.searchParams.set(Ne,p),W},[s,m,p]);h.useEffect(()=>{o==="connected"&&f(W=>W===null?l:W)},[o,l]);const{t:b}=ye(ve),{devMode:y}=Tt(),v=ur(),w=h.useRef(null),_=u.jsx(no,{...n,iframeRef:w,options:r});h.useImperativeHandle(e,()=>w.current);const x=a.status==="loading"||a.status==="reloading",[E,C]=h.useState(!1),S=a.status==="refreshing",[I,P]=h.useState(!1),j=x||S||i==="connecting",T=h.useCallback(()=>{w.current&&(w.current.src=g.toString(),t({type:un}))},[t,g]),A=h.useCallback(()=>{R(!0)},[]),[k,R]=h.useState(!1),[M,D]=h.useState(!1);h.useEffect(()=>{if(!(x||S)&&(i==="connecting"||i==="reconnecting")){const W=setTimeout(()=>{D(!0)},5e3);return()=>clearTimeout(W)}},[i,x,S]),h.useEffect(()=>{if(!(x||S||!M)){if(i==="connected"&&(P(!1),D(!1),C(!1),R(!1)),i==="connecting"){const W=setTimeout(()=>{C(!0),console.error("Unable to connect to visual editing. Make sure you've setup '@sanity/visual-editing' correctly")},qt);return()=>clearTimeout(W)}if(i==="reconnecting"){const W=setTimeout(()=>{C(!0),P(!0)},qt);return()=>clearTimeout(W)}}},[x,i,S,M]);const O=h.useCallback(()=>{t({type:dn})},[t]);h.useEffect(()=>{if(!w.current)return;const W=w.current;function Z(){W===document.activeElement&&W.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0}))}return window.addEventListener("blur",Z),()=>{window.removeEventListener("blur",Z)}},[]);const z=h.useMemo(()=>(x||i==="connecting"&&a.status!=="refreshing")&&!k,[k,a.status,x,i]),N=h.useSyncExternalStore(h.useCallback(()=>()=>{},[]),()=>CSS.supports("(view-transition-name: test)")),Q=h.useMemo(()=>[z?"background":"active",x?"reloading":"idle",N?"":c,M&&!k?"timedOut":""],[N,k,x,z,M,c]),[V,Y]=h.useState(c),[re,ie]=h.useState(ht[c]);return h.useEffect(()=>{if(N&&c!==V){const W=()=>{Y(c),ie(ht[c])};!v&&"startViewTransition"in document&&typeof document.startViewTransition=="function"?document.startViewTransition(()=>dr.flushSync(()=>W())):W()}},[N,v,V,c]),u.jsx(cs,{transition:v?{duration:0}:void 0,children:u.jsxs(pr,{children:[_,u.jsx(ue,{flex:1,tone:"transparent",children:u.jsxs(ne,{align:"center",height:"fill",justify:"center",padding:(N?V:c)==="desktop"?0:2,sizing:"border",style:{position:"relative",cursor:j?"wait":void 0},children:[u.jsx(ln,{children:!I&&!x&&!S&&M&&!k?u.jsx(ft,{initial:"initial",animate:"animate",exit:"exit",variants:Yt,justify:"center",align:"center",style:{inset:"0",position:"absolute",backdropFilter:E?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",transition:"backdrop-filter 0.2s ease-in-out",WebkitBackdropFilter:E?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",WebkitTransition:"-webkit-backdrop-filter 0.2s ease-in-out",zIndex:1},children:u.jsxs(ne,{style:{...st[c]},justify:"center",align:"center",direction:"column",gap:4,children:[E&&u.jsx(Se,{disabled:!0,mode:"ghost",text:b("preview-frame.continue-button.text"),style:{opacity:0}}),u.jsx(ue,{radius:2,tone:E?"caution":"inherit",padding:4,shadow:1,children:u.jsxs(ne,{justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(Ze,{muted:!0}),u.jsx(X,{muted:!0,size:1,children:E?b("preview-frame.status",{context:"timeout"}):b("preview-frame.status",{context:"connecting"})})]})}),E&&u.jsx(Se,{tone:"critical",onClick:A,text:b("preview-frame.continue-button.text")})]})}):(x||i==="connecting"&&a.status!=="refreshing")&&!k?u.jsx(ft,{initial:"initial",animate:"animate",exit:"exit",variants:Yt,justify:"center",align:"center",style:{inset:"0",position:"absolute"},children:u.jsxs(ne,{style:{...st[c]},justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(Ze,{muted:!0}),u.jsx(X,{muted:!0,size:1,children:b("preview-frame.status",{context:"loading"})})]})}):I&&!k?u.jsx(ft,{initial:"initial",animate:"animate",exit:"exit",variants:so,justify:"center",align:"center",style:{background:"var(--card-bg-color)",inset:"0",position:"absolute"},children:u.jsx(Dt,{flex:1,message:b("preview-frame.connection.error.text"),onRetry:T,onContinueAnyway:A,children:y&&u.jsxs(u.Fragment,{children:[i!=="connected"&&u.jsx(ue,{padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(et,{muted:!0,size:0,children:b("preview-frame.overlay.connection-status.label")}),u.jsx(tt,{size:1,children:b("channel.status",{context:i})})]})}),o!=="connected"&&u.jsx(ue,{padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(et,{muted:!0,size:0,children:b("preview-frame.loader.connection-status.label")}),u.jsx(tt,{size:1,children:b("channel.status",{context:o})})]})})]})})}):null}),u.jsx(Ba,{animate:Q,initial:["background"],onLoad:O,preventClick:z,ref:w,src:g.toString(),style:re,variants:ht})]})})]})})}));Ln.displayName="Memo(ForwardRef(Preview))";const st={desktop:{width:"100%",height:"100%"},mobile:{width:375,height:650}},Yt={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},so={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},ht={desktop:{...st.desktop,boxShadow:"0 0 0 0px var(--card-border-color)"},mobile:{...st.mobile,boxShadow:"0 0 0 1px var(--card-border-color)"},background:{opacity:0,scale:1},idle:{scale:1},reloading:{scale:[1,1,1,.98]},active:{opacity:[0,0,1],scale:1},timedOut:{opacity:[0,0,1]}};function ao(){let n=!1;return(...e)=>{n||(console.warn(...e),n=!0)}}const oo=ao();function io(n,e){Or(n);const[t,a]=h.useState({}),[r,s]=h.useState({}),o=h.useRef(""),i=h.useCallback((l,c,p=[])=>{const d=p.filter(f=>"_projectId"in f&&f._projectId?(oo("Cross dataset references are not supported yet, ignoring source document",f),!1):f);(c==="published"?a:s)(f=>{const m={};for(const b of d)m[b._id]=b;if(o.current!==e.current.url)return o.current=e.current.url,{[l]:m};const g=f[l];return as(g,m)?f:{...f,[l]:m}})},[e]);return[h.useMemo(()=>{const l=Object.values(n==="published"?t:r).reduce((c,p)=>(Object.values(p).forEach(d=>{c[d._id]=d}),c),{});return Object.values(l)},[n,r,t]),i]}function zn(n,e){return n instanceof Function?n(e):n}function co(n,e){var t;if(n.resolve){const a=(t=n.resolve(e))==null?void 0:t.filter;return a?`// groq
*[${a}][0]{_id, _type}`:void 0}return"type"in n?`// groq
*[_type == "${n.type}"][0]{_id, _type}`:`// groq
*[${zn(n.filter,e)}][0]{_id, _type}`}function lo(n,e){var t;return n.resolve?((t=n.resolve(e))==null?void 0:t.params)??e.params:"type"in n?{}:zn(n.params,e)??e.params}function uo(n,e){const t=Array.isArray(n)?n:[n];for(n of t){let a,r=n;if(typeof n=="string")try{const s=new URL(n);a=s.origin,r=s.pathname}catch{}if(!(a&&e.origin!==a))try{const s=Ms(r,{decode:decodeURIComponent})(e.pathname);if(s){const{params:o,path:i}=s;return{origin:a,params:o,path:i}}}catch{throw new Error(`"${n}" is not a valid route pattern`)}}}function po(n){var E,C;const e=L.c(20),{navigate:t,navigationHistory:a,path:r,previewUrl:s,resolvers:o}=n;let i;e[0]!==o?(i=o===void 0?[]:o,e[0]=o,e[1]=i):i=e[1];const l=i,{state:c}=kt();let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p={apiVersion:Ke},e[2]=p):p=e[2];const d=He(p);let f;e[3]!==r||e[4]!==c?(f=r||((C=(E=c._searchParams)==null?void 0:E.find(mo))==null?void 0:C[1])||"",e[3]=r,e[4]=c,e[5]=f):f=e[5];const m=f,[g,b]=h.useState(void 0),y=h.useRef(void 0);let v;e[6]!==t||e[7]!==a?(v=(S,I)=>{var P,j;(!S||y.current!==S._id)&&(b({document:S,path:I.pathname}),y.current=S==null?void 0:S._id,((P=a.at(-1))==null?void 0:P.id)===((j=a.at(-2))==null?void 0:j.id)&&(t==null||t({id:S==null?void 0:S._id,type:S==null?void 0:S._type})))},e[6]=t,e[7]=a,e[8]=v):v=e[8];const w=gn(v);let _;e[9]!==d||e[10]!==w||e[11]!==s||e[12]!==m||e[13]!==l?(_=()=>{const S=typeof s=="string"?s:typeof s=="object"&&(s==null?void 0:s.origin)||location.origin,I=new URL(m,S);if(l.length){let P;for(const j of l){const T=uo(j.route,I);if(T){P={context:T,resolver:j};break}}if(P){const j=co(P.resolver,P.context),T=lo(P.resolver,P.context);if(j){const A=new AbortController,k={perspective:"drafts",signal:A.signal};return d.fetch(j,T,k).then(R=>w(R,I)).catch(R=>{R instanceof Error&&R.name==="AbortError"||(b({document:void 0,path:I.pathname}),y.current=void 0)}),()=>{A.abort()}}}}b(void 0),y.current=void 0},e[9]=d,e[10]=w,e[11]=s,e[12]=m,e[13]=l,e[14]=_):_=e[14];let x;return e[15]!==d||e[16]!==s||e[17]!==m||e[18]!==l?(x=[d,s,m,l],e[15]=d,e[16]=s,e[17]=m,e[18]=l,e[19]=x):x=e[19],h.useEffect(_,x),g}function mo(n){const[e]=n;return e==="preview"}const fo=pn(It(),fn(1));mn(fo);const ho=/^([\w-]+):(0|[1-9][0-9]*)$/,go=/^([\w-]+):([0-9]+),([0-9]+)$/,yo=/^([\w-]+):([\w-]+)$/;function vo(n){const e=[];for(const t of n.split(".")){const a=ho.exec(t);if(a){e.push(a[1],Number(a[2]));continue}const r=go.exec(t);if(r){e.push(r[1],[Number(r[2]),Number(r[3])]);continue}const s=yo.exec(t);if(s){e.push(s[1],{_key:s[2]});continue}e.push(t)}return e}const Jt=pn(It(),fn(1));mr({origin:Jt,href:Jt,data:mn(gr(It(),Lr()))});function bo(n){var t;if(n===void 0)return;const e=(t=decodeURIComponent(n))==null?void 0:t.split(".");return e[0]==="drafts"&&e.shift(),e.join(".")}function wo(n){if(n!==void 0)return yn.toString(vo(decodeURIComponent(n)))}function xo(n){return{id:bo(n.id),path:wo(n.path),type:n.type}}function Je(n){return Object.fromEntries(Object.entries(n).filter(([,e])=>e!==void 0&&e!==""&&e!==null))}function Po({initialPreviewUrl:n,routerNavigate:e,routerState:t,routerSearchParams:a,frameStateRef:r}){const s=h.useMemo(()=>{const{id:d,path:f,type:m}=xo(t);return{id:d,type:m,path:f,preview:a.preview||`${n.pathname}${n.search}`,perspective:a.perspective,viewport:a.viewport,inspect:a.inspect,rev:a.rev,since:a.since,template:a.template,templateParams:a.templateParams,view:a.view,pathKey:a.pathKey,instruction:a.instruction,comment:a.comment,changesInspectorTab:a.changesInspectorTab}},[t,a,n]),o=h.useMemo(()=>Je({inspect:s.inspect,path:s.path,rev:s.rev,since:s.since,template:s.template,templateParams:s.templateParams,view:s.view,pathKey:s.pathKey,instruction:s.instruction,comment:s.comment,changesInspectorTab:s.changesInspectorTab}),[s.changesInspectorTab,s.comment,s.inspect,s.instruction,s.path,s.pathKey,s.rev,s.since,s.template,s.templateParams,s.view]),i=h.useMemo(()=>Je({perspective:s.perspective,preview:s.preview,viewport:s.viewport}),[s.perspective,s.preview,s.viewport]),l=h.useRef(t);h.useEffect(()=>{l.current=t},[t]);const[c,p]=h.useState([t]);return{navigate:h.useCallback((d,f={},m)=>{d.id&&(d.id=ot(d.id));const{_searchParams:g,...b}=l.current,y=(g||[]).reduce((x,[E,C])=>(x[E]=C,x),{}),v=Je({...b,...d}),w=Je({...y,...f});b.id!==v.id&&(delete w.template,delete w.templateParams),v._searchParams=Object.entries(w).reduce((x,[E,C])=>[...x,[E,C]],[]);const _=m??w.preview===r.current.url;p(x=>[...x,v]),e(v,{replace:_})},[e,r]),navigationHistory:c,params:s,searchParams:i,structureParams:o}}const So=n=>{const e=L.c(10),[t,a]=h.useState(_o);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=d=>{const f=window.open(d,"_blank");f&&a(m=>new Set(m).add(f))},e[0]=r):r=e[0];const s=r;let o,i;e[1]!==n||e[2]!==t?(o=()=>{const d=[];if(t.size&&n)for(const f of t)f&&"closed"in f&&!f.closed&&d.push(n.addTarget(f));return()=>{d.forEach(jo)}},i=[n,t],e[1]=n,e[2]=t,e[3]=o,e[4]=i):(o=e[3],i=e[4]),h.useEffect(o,i);let l,c;e[5]!==t?(l=()=>{if(t.size){const d=setInterval(()=>{const f=new Set;for(const m of t)m&&"closed"in m&&m.closed&&f.add(m);f.size&&a(m=>{const g=new Set(m);for(const b of f)g.delete(b);return g})},Wr);return()=>{clearInterval(d)}}},c=[t],e[5]=t,e[6]=l,e[7]=c):(l=e[6],c=e[7]),h.useEffect(l,c);let p;return e[8]!==t?(p={popups:t,open:s},e[8]=t,e[9]=p):p=e[9],p};function _o(){return new Set}function jo(n){return n()}function Eo(n,e,t,a,r){var d,f;const s=He({apiVersion:Ke}),o=wn(),i=((d=o==null?void 0:o.activeWorkspace)==null?void 0:d.basePath)||"/",l=((f=o==null?void 0:o.activeWorkspace)==null?void 0:f.name)||"default",c=Co(e,i,l,a),p=To(r&&typeof n=="object"||typeof n=="function",c);return Cn(async()=>{if(typeof n=="string"){const g=new URL(n,location.origin);let b=g;try{if(a){const y=new URL(a,g);y.origin===g.origin&&(b=y)}}catch{}return location.origin===b.origin&&(b.pathname.startsWith(`${i}/`)||b.pathname===i)?g:b}const m=await(typeof n=="object"?Ns(n):n)({client:s,previewUrlSecret:p,studioPreviewPerspective:Nt(t),previewSearchParam:a,studioBasePath:i});return new URL(m,location.origin)},[...c,p])}const Ro=Symbol("sanity/presentation/resolveUUID");function Co(n,e,t,a){const r=L.c(12);let s;r[0]!==a?(s=()=>a||"",r[0]=a,r[1]=s):s=r[1];const[o,i]=h.useState(s),l=h.useRef(0);let c,p;r[2]!==o||r[3]!==a?(c=()=>{if(o&&a)return window.clearTimeout(l.current),()=>{l.current=window.setTimeout(()=>{i("")},100)}},p=[o,a],r[2]=o,r[3]=a,r[4]=c,r[5]=p):(c=r[4],p=r[5]),h.useEffect(c,p);const d=Ct();let f;const m=d==null?void 0:d.id;let g;return r[6]!==e||r[7]!==o||r[8]!==m||r[9]!==n||r[10]!==t?(g=["sanity/presentation",e,t,n,m,Ro,o],r[6]=e,r[7]=o,r[8]=m,r[9]=n,r[10]=t,r[11]=g):g=r[11],f=g,f}function To(n,e){const t=L.c(10);let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={apiVersion:Ke},t[0]=a):a=t[0];const r=He(a),s=Ct(),[o,i]=h.useState("");let l;t[1]!==r||t[2]!==(s==null?void 0:s.id)||t[3]!==e||t[4]!==n||t[5]!==o?(l=n?Cn(async()=>await Ds(r,"@sanity/presentation",typeof window>"u"?"":location.href,s==null?void 0:s.id),[...e,o]):null,t[1]=r,t[2]=s==null?void 0:s.id,t[3]=e,t[4]=n,t[5]=o,t[6]=l):l=t[6];const c=l;let p,d;return t[7]!==c?(p=()=>{if(!c)return;const f=setTimeout(()=>{h.startTransition(()=>i(c.expiresAt.toString()))},c.expiresAt.getTime()-Date.now());return()=>clearTimeout(f)},d=[c],t[7]=c,t[8]=p,t[9]=d):(p=t[8],d=t[9]),h.useEffect(p,d),(c==null?void 0:c.secret)||null}function gt(){const n=L.c(4);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,n[0]=e):e=n[0];const[t,a]=h.useState(e);let r;e:{const c=Array.from(t.values());if(c.find(Ao)){r="connected";break e}const p=c.filter(ko);if(p.length){r=p.some(Io)?"connecting":"reconnecting";break e}r="idle"}const s=r;let o;n[1]===Symbol.for("react.memo_cache_sentinel")?(o=c=>{a(p=>{var f;const d=new Map(p);if(c.status==="disconnected")d.delete(c.connection);else{const m=((f=d.get(c.connection))==null?void 0:f.hasConnected)||c.status==="connected",g=c.status==="handshaking"?"connecting":c.status;d.set(c.connection,{status:g,hasConnected:m})}return d})},n[1]=o):o=n[1];const i=o;let l;return n[2]!==s?(l=[s,i],n[2]=s,n[3]=l):l=n[3],l}function Io(n){const{hasConnected:e}=n;return!e}function ko(n){const{status:e}=n;return e==="connecting"}function Ao(n){const{status:e}=n;return e==="connected"}const Mo=h.lazy(()=>Ae(()=>import("./LiveQueries-BUUmkNUa.js"),__vite__mapDeps([2,1,3]))),$o=h.lazy(()=>Ae(()=>import("./PostMessageDocuments-CTux4QMd.js"),__vite__mapDeps([4,1]))),Oo=h.lazy(()=>Ae(()=>import("./PostMessageRefreshMutations-DnZxmZQs.js"),__vite__mapDeps([5,1]))),Lo=h.lazy(()=>Ae(()=>import("./PostMessagePerspective-BlmeKMh4.js"),__vite__mapDeps([6,1]))),zo=h.lazy(()=>Ae(()=>import("./PostMessagePreviewSnapshots-DCRuMFXS.js"),__vite__mapDeps([7,1]))),Wo=h.lazy(()=>Ae(()=>import("./PostMessageSchema-CKmjTzfb.js"),__vite__mapDeps([8,1]))),Do=h.lazy(()=>Ae(()=>import("./PostMessageTelemetry-DbT-Xh8t.js"),__vite__mapDeps([9,1]))),No=pe(ne)`
  overflow-x: auto;
`;function Uo(n){var Me,we,ze,xe,Pe;const{canCreateUrlPreviewSecrets:e,canToggleSharePreviewAccess:t,canUseSharedPreviewAccess:a,tool:r,vercelProtectionBypass:s}=n,o=(Me=r.options)==null?void 0:Me.components,i=(we=r.options)==null?void 0:we.previewUrl,l=r.name||yr,{unstable_navigator:c,unstable_header:p}=o||{},{navigate:d,state:f}=kt(),m=hn(Object.fromEntries(f._searchParams||[])),{perspectiveStack:g,selectedPerspectiveName:b="drafts",selectedReleaseId:y}=vr(),v=y?g:b,w=Eo(i||"/",l,v,m.preview||null,e),_=h.useMemo(()=>i&&typeof i=="object"&&"draftMode"in i&&i.draftMode?(console.warn("previewUrl.draftMode is deprecated, use previewUrl.previewMode instead"),i.draftMode.shareAccess!==!1):i&&typeof i=="object"&&"previewMode"in i&&i.previewMode?i.previewMode.shareAccess!==!1:!1,[i]),[x]=h.useState(()=>{var q;const $=(q=r.options)==null?void 0:q.devMode;return typeof $=="function"?$():typeof $=="boolean"?$:typeof window<"u"&&window.location.hostname==="localhost"}),E=h.useMemo(()=>w.origin,[w.origin]),C=h.useRef(null),[S,I]=h.useState(),[P,j]=h.useState(null),T=h.useRef({title:void 0,url:void 0}),{navigate:A,navigationHistory:k,params:R,searchParams:M,structureParams:D}=Po({initialPreviewUrl:w,routerNavigate:d,routerState:f,routerSearchParams:m,frameStateRef:T}),O=h.useMemo(()=>Tn(A,50),[A]),[z,N]=h.useReducer(br,{},wr),Q=h.useMemo(()=>R.viewport?"mobile":"desktop",[R.viewport]),[V,Y]=io(v,T),re=xr(),ie=Pr(),W=po({navigate:A,navigationHistory:k,path:R.preview,previewUrl:(ze=r.options)==null?void 0:ze.previewUrl,resolvers:(Pe=(xe=r.options)==null?void 0:xe.resolve)==null?void 0:Pe.mainDocuments}),[Z,ce]=gt(),[le,B]=gt(),[F,H]=gt(),{open:K}=So(S),se=z.iframe.status==="loading";h.useEffect(()=>{var U;const $=(U=C.current)==null?void 0:U.contentWindow;if(!$||se)return;const q=xs({targetOrigin:E});return q.addTarget($),I(q),()=>{q.destroy(),I(void 0)}},[E,se]);const G=gn(($,q,U)=>O($,q,U));h.useEffect(()=>{if(!S)return;const $=S.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},rt().provide({actors:Ht()}));$.on("visual-editing/focus",U=>{"id"in U&&G({type:U.type,id:U.id,path:U.path})}),$.on("visual-editing/navigate",U=>{const{title:Wn,url:Ge}=U;if(T.current.url!==Ge)try{const[Dn,Nn]=Ge.split("?"),Xe=new URLSearchParams(Nn);Xe.delete(Ne),Xe.delete(jt),G({},{preview:`${Dn}${Xe.size>0?"?":""}${Xe}`})}catch{G({},{preview:Ge})}T.current={title:Wn,url:Ge}}),$.on("visual-editing/meta",U=>{T.current.title=U.title}),$.on("visual-editing/toggle",U=>{N({type:Sr,enabled:U.enabled})}),$.on("visual-editing/documents",U=>{Y("visual-editing",U.perspective,U.documents)}),$.on("visual-editing/refreshing",U=>{U.source==="manual"?clearTimeout(be.current):U.source==="mutation"&&N({type:Ft})}),$.on("visual-editing/refreshed",()=>{N({type:dn})}),$.onStatus(ce);const q=$.start();return j($),()=>{q(),j(null)}},[S,Y,ce,E]),h.useEffect(()=>{if(!S)return;const $=S.createChannel({name:"presentation",connectTo:"preview-kit",heartbeat:!0},rt().provide({actors:Ht()}));return $.onStatus(H),$.on("preview-kit/documents",q=>{q.projectId===re&&q.dataset===ie&&Y("preview-kit",q.perspective,q.documents)}),$.start()},[S,ie,re,Y,H,E]);const ee=h.useCallback($=>{O({path:yn.toString($)},{},!0)},[O]),J=h.useCallback($=>{const q=new URL($,w.origin),U=q.pathname+q.search;q.origin===w.origin&&U!==R.preview&&O({},{preview:U})},[w,R,O]),ae=h.useCallback($=>{O({},$)},[O]);h.useEffect(()=>{R.id&&R.path?P==null||P.post("presentation/focus",{id:R.id,path:R.path}):P==null||P.post("presentation/blur")},[R.id,R.path,P]),h.useEffect(()=>{T.current.url&&R.preview&&T.current.url!==R.preview&&(T.current.url=R.preview,Z!=="connected"&&C.current?C.current.src=`${E}${R.preview}`:P==null||P.post("presentation/navigate",{url:R.preview,type:"replace"}))},[Z,E,R.preview,P]);const oe=h.useCallback(()=>P==null?void 0:P.post("presentation/toggle-overlay"),[P]),[fe,he]=h.useState(null);h.useEffect(()=>{const $=U=>{Zt(U)&&oe()},q=U=>{Zt(U)&&oe(),Fo(["mod","\\"],U)&&oe()};return window.addEventListener("keydown",q),window.addEventListener("keyup",$),()=>{window.removeEventListener("keydown",q),window.removeEventListener("keyup",$)}},[oe]);const[_e,me]=h.useState(null),[{navigatorEnabled:je,toggleNavigator:ge},Ee]=za({unstable_navigator:c}),be=h.useRef(void 0),Re=h.useCallback($=>{if(N({type:Ft}),P){be.current=window.setTimeout($,300),P.post("presentation/refresh",{source:"manual",livePreviewEnabled:F==="connected"||le==="connected"});return}$()},[le,F,P]),Le=_r(),Ce=h.useCallback(({id:$,type:q,path:U})=>{if(T.current.url)return{title:T.current.title||T.current.url,name:"edit",params:{id:$,path:U,type:q,inspect:jr,workspace:Le.name,mode:Er,preview:R.preview}}},[R.preview,Le.name]),Te=h.useCallback($=>{O({},{viewport:$==="desktop"?void 0:"mobile"},!0)},[O]);return u.jsxs(u.Fragment,{children:[u.jsx(qa,{devMode:x,name:l,navigate:O,params:R,searchParams:M,structureParams:D,children:u.jsx(Oa,{navigate:O,children:u.jsx(Ua,{params:R,children:u.jsx(Gs,{comlink:P,children:u.jsx(No,{height:"fill",children:u.jsxs(aa,{children:[u.jsx(Ee,{}),u.jsx(Wt,{id:"preview",minWidth:325,defaultSize:je?50:75,order:3,children:u.jsx(ne,{direction:"column",flex:1,height:"fill",ref:me,children:u.jsx(Rr,{element:_e,children:u.jsx(Ln,{canSharePreviewAccess:_,canToggleSharePreviewAccess:t,canUseSharedPreviewAccess:a,dispatch:N,header:p,iframe:z.iframe,initialUrl:w,loadersConnection:le,navigatorEnabled:je,onPathChange:J,onRefresh:Re,openPopup:K,overlaysConnection:Z,previewUrl:R.preview,perspective:v,ref:C,setViewport:Te,targetOrigin:E,toggleNavigator:ge,toggleOverlay:oe,viewport:Q,visualEditing:z.visualEditing,vercelProtectionBypass:s},E)})})}),u.jsx($a,{documentId:R.id,documentsOnPage:V,documentType:R.type,getCommentIntent:Ce,mainDocumentState:W,onFocusPath:ee,onStructureParams:ae,searchParams:M,setDisplayedDocument:he,structureParams:D})]})})})})})}),u.jsxs(h.Suspense,{children:[S&&u.jsx(Mo,{controller:S,perspective:v,liveDocument:fe,onDocumentsOnPage:Y,onLoadersConnection:B}),P&&R.id&&R.type&&u.jsx(Oo,{comlink:P,id:R.id,type:R.type,loadersConnection:le,previewKitConnection:F}),P&&u.jsx(Wo,{comlink:P,perspective:v}),P&&V.length>0&&u.jsx(zo,{comlink:P,perspective:v,refs:V}),P&&u.jsx($o,{comlink:P,perspective:v}),P&&u.jsx(Hs,{comlink:P}),P&&u.jsx(Lo,{comlink:P,perspective:v}),P&&u.jsx(Do,{comlink:P})]})]})}function Zt(n){return n.key==="Alt"}const qo=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),en={alt:"altKey",ctrl:"ctrlKey",mod:qo?"metaKey":"ctrlKey",shift:"shiftKey"};function Fo(n,e){return n.every(t=>en[t]?e[en[t]]:e.key===t.toUpperCase())}function Vo(){const n=L.c(7);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:Ke},n[0]=e):e=n[0];const t=He(e),[a,r]=h.useReducer(Bo,"loading"),[s,o]=h.useState(null);let i,l;n[1]!==t?(i=()=>{const p=Vs(t,d=>{o(d),r()});return()=>p()},l=[t],n[1]=t,n[2]=i,n[3]=l):(i=n[2],l=n[3]),h.useEffect(i,l);let c;return n[4]!==a||n[5]!==s?(c=[s,a],n[4]=a,n[5]=s,n[6]=c):c=n[6],c}function Bo(){return"ready"}function Ho(n){const e=L.c(17),{t}=ye(ve),{previewUrl:a}=n.tool.options??{},{push:r}=on(),s=typeof a=="object"||typeof a=="function",o=fr(),[i,l]=h.useState(null),[c,p]=h.useState(null),[d,f]=h.useState(null),[m,g]=h.useState(null);let b,y;e[0]!==o||e[1]!==s?(b=()=>{if(!s)return;const j=o.checkDocumentPermission("create",{_id:$e,_type:Ue}).subscribe(l),T=o.checkDocumentPermission("update",{_id:$e,_type:Ue}).subscribe(p),A=o.checkDocumentPermission("read",{_id:$e,_type:Ue}).subscribe(f),k=o.checkDocumentPermission("create",{_id:`drafts.${an()}`,_type:sn}).subscribe(g);return()=>{j.unsubscribe(),T.unsubscribe(),A.unsubscribe(),k.unsubscribe()}},y=[o,s],e[0]=o,e[1]=s,e[2]=b,e[3]=y):(b=e[2],y=e[3]),h.useEffect(b,y);const v=m==null?void 0:m.granted;let w,_;e[4]!==v||e[5]!==r||e[6]!==t||e[7]!==s?(w=()=>{if(!s||v!==!1)return;const j=requestAnimationFrame(()=>r({closable:!0,status:"error",duration:3e4,title:t("preview-url-secret.missing-grants")}));return()=>cancelAnimationFrame(j)},_=[v,r,t,s],e[4]=v,e[5]=r,e[6]=t,e[7]=s,e[8]=w,e[9]=_):(w=e[8],_=e[9]),h.useEffect(w,_);const[x,E]=Vo();if(E==="loading"||s&&(!i||typeof i.granted>"u"||!c||typeof c.granted>"u"||!m||!d||typeof d.granted>"u"||typeof m.granted>"u")){let j;return e[10]===Symbol.for("react.memo_cache_sentinel")?(j=u.jsx(vn,{}),e[10]=j):j=e[10],j}const C=v===!0,S=(i==null?void 0:i.granted)===!0&&(c==null?void 0:c.granted)===!0,I=(d==null?void 0:d.granted)===!0;let P;return e[11]!==n||e[12]!==C||e[13]!==S||e[14]!==I||e[15]!==x?(P=u.jsx(Uo,{...n,vercelProtectionBypass:x,canCreateUrlPreviewSecrets:C,canToggleSharePreviewAccess:S,canUseSharedPreviewAccess:I}),e[11]=n,e[12]=C,e[13]=S,e[14]=I,e[15]=x,e[16]=P):P=e[16],P}const Xo=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"}));export{Xo as P,Ht as a,rt as c};
